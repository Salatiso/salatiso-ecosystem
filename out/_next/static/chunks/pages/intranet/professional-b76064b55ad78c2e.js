(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4276],{3276:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/intranet/professional",function(){return a(80671)}])},61796:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},99737:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},27871:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},47782:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},41036:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},19078:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},80374:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},85438:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},30206:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},85087:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},93149:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},11773:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},91579:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},17688:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},89726:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},60268:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});const s=(0,a(1).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},80671:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return dt}});var s=a(85893),l=a(67294),i=a(9008),n=a.n(i),r=a(46194),o=a(12023),c=a(89726),d=a(72003),m=a(27871),u=a(56286),p=a(44459),x=a(91579),g=a(35624),h=a(37568),y=a(95818),v=a(99724);const b={company:null,governance:{constitution:{content:"",lastUpdated:new Date,approvedBy:[]},policies:[],compliance:[],board:[],meetings:[]},humanCapital:{roles:[],employees:[],contracts:[],performance:[],development:[],skills:[]},operations:{projects:[],knowledgeBase:[],risks:[],incidents:[]},finance:{budgets:[],expenses:[],financialReports:[]},marketing:{campaigns:[],partners:[],content:[]},reporting:{dashboards:[],auditLogs:[],kpis:[],reports:[]},loading:{company:!1,governance:!1,humanCapital:!1,operations:!1,finance:!1,marketing:!1,reporting:!1},error:null};function j(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:{...e.loading,[t.module]:t.loading}};case"SET_ERROR":return{...e,error:t.error};case"SET_COMPANY":return{...e,company:t.company};case"UPDATE_GOVERNANCE":return{...e,governance:{...e.governance,...t.data}};case"UPDATE_HUMAN_CAPITAL":return{...e,humanCapital:{...e.humanCapital,...t.data}};case"UPDATE_OPERATIONS":return{...e,operations:{...e.operations,...t.data}};case"UPDATE_FINANCE":return{...e,finance:{...e.finance,...t.data}};case"UPDATE_MARKETING":return{...e,marketing:{...e.marketing,...t.data}};case"UPDATE_REPORTING":return{...e,reporting:{...e.reporting,...t.data}};default:return e}}const f=(0,l.createContext)(null),N=e=>{let{children:t}=e;const[a,i]=(0,l.useReducer)(j,b),n=async(e,t,s,l)=>{try{if(!a.company)return;const n={timestamp:new Date,userId:"current-user",userName:"Current User",action:e,resource:t,resourceId:s,details:l||{}},r=[...a.reporting.auditLogs,{...n,id:Date.now().toString()}];i({type:"UPDATE_REPORTING",data:{auditLogs:r}})}catch(n){}},r={state:a,dispatch:i,loadCompanyData:async e=>{try{i({type:"SET_LOADING",module:"company",loading:!0}),i({type:"SET_ERROR",error:null});const t=(0,v.JU)(y.db,"companies",e),a=(0,v.cf)(t,(e=>{if(e.exists()){const t=e.data();i({type:"SET_COMPANY",company:t})}}));i({type:"SET_LOADING",module:"governance",loading:!0});const s=(0,v.JU)(y.db,"companies",e,"governance","current");(0,v.cf)(s,(e=>{e.exists()&&i({type:"UPDATE_GOVERNANCE",data:e.data()}),i({type:"SET_LOADING",module:"governance",loading:!1})})),i({type:"SET_LOADING",module:"humanCapital",loading:!0});const l=(0,v.JU)(y.db,"companies",e,"humanCapital","current");(0,v.cf)(l,(e=>{e.exists()&&i({type:"UPDATE_HUMAN_CAPITAL",data:e.data()}),i({type:"SET_LOADING",module:"humanCapital",loading:!1})})),i({type:"SET_LOADING",module:"operations",loading:!0});const n=(0,v.JU)(y.db,"companies",e,"operations","current");(0,v.cf)(n,(e=>{e.exists()&&i({type:"UPDATE_OPERATIONS",data:e.data()}),i({type:"SET_LOADING",module:"operations",loading:!1})})),i({type:"SET_LOADING",module:"finance",loading:!0});const r=(0,v.JU)(y.db,"companies",e,"finance","current");(0,v.cf)(r,(e=>{e.exists()&&i({type:"UPDATE_FINANCE",data:e.data()}),i({type:"SET_LOADING",module:"finance",loading:!1})})),i({type:"SET_LOADING",module:"marketing",loading:!0});const o=(0,v.JU)(y.db,"companies",e,"marketing","current");(0,v.cf)(o,(e=>{e.exists()&&i({type:"UPDATE_MARKETING",data:e.data()}),i({type:"SET_LOADING",module:"marketing",loading:!1})})),i({type:"SET_LOADING",module:"reporting",loading:!0});const c=(0,v.JU)(y.db,"companies",e,"reporting","current");return(0,v.cf)(c,(e=>{e.exists()&&i({type:"UPDATE_REPORTING",data:e.data()}),i({type:"SET_LOADING",module:"reporting",loading:!1})})),i({type:"SET_LOADING",module:"company",loading:!1}),()=>{a()}}catch(t){i({type:"SET_ERROR",error:"Failed to load company data"}),i({type:"SET_LOADING",module:"company",loading:!1})}},updateCompanyProfile:async(e,t)=>{try{const a=(0,v.JU)(y.db,"companies",e);await(0,v.r7)(a,{...t,updatedAt:new Date}),await n("update","company",e,t)}catch(a){throw i({type:"SET_ERROR",error:"Failed to update company profile"}),a}},logAuditEvent:n};return(0,s.jsx)(f.Provider,{value:r,children:t})},w=()=>{const e=(0,l.useContext)(f);if(!e)throw new Error("useProfessional must be used within a ProfessionalProvider");return e};var D=a(13427),C=a(42392),E=a(78992),k=a(28335),I=a(1);const S=(0,I.Z)("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var A=a(18742),T=a(85438),P=a(34155);const R=(e,t,a)=>{try{const s=(0,v.JU)(y.db,"businesses",e);return(0,v.cf)(s,(e=>{e.exists()?t({id:e.id,...e.data()}):t(null)}),(e=>{null===a||void 0===a||a(e)}))}catch(s){return null===a||void 0===a||a(s),()=>{}}},_=async function(e,t,a,s){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"MNI";try{const i={type:a,source:l,companyId:t,userId:e,timestamp:v.EK.now(),data:s,visible:["MNI","BizHelp","Hub"]};await(0,v.ET)((0,v.hJ)(y.db,"activities/".concat(e)),i)}catch(i){throw i}},Z=(e,t,a,s)=>{try{const l=(0,v.IO)((0,v.hJ)(y.db,"activities/".concat(e)),(0,v.ar)("companyId","==",t));return(0,v.cf)(l,(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data()})})),a(t.sort(((e,t)=>t.timestamp-e.timestamp)))}),(e=>{null===s||void 0===s||s(e)}))}catch(l){return null===s||void 0===s||s(l),()=>{}}},L={PROJECT_CREATED:"project_created",PROJECT_UPDATED:"project_updated",PROJECT_COMPLETED:"project_completed",TASK_CREATED:"task_created",TASK_STATUS_CHANGED:"task_status_changed",TASK_COMPLETED:"task_completed",COMPLIANCE_COMPLETED:"compliance_completed",COMPLIANCE_OVERDUE:"compliance_overdue",COMPLIANCE_REMINDER:"compliance_reminder",GOVERNANCE_DOCUMENT_ADDED:"governance_document_added",POLICY_ADOPTED:"policy_adopted",BOARD_MEETING_HELD:"board_meeting_held",ROLE_CREATED:"role_created",TEAM_MEMBER_ADDED:"team_member_added",PERFORMANCE_REVIEW_COMPLETED:"performance_review_completed",PARTNERSHIP_CREATED:"partnership_created",PARTNERSHIP_SIGNED:"partnership_signed",PARTNERSHIP_COMPLETED:"partnership_completed",RISK_IDENTIFIED:"risk_identified",RISK_MITIGATED:"risk_mitigated",INCIDENT_REPORTED:"incident_reported",BUSINESS_REGISTERED:"business_registered",ENTITY_CREATED:"entity_created"},O=(e,t)=>{const a=P.env.REACT_APP_BIZHELP_URL||"https://bizhelp-lifecv.web.app";let s={dashboard:"/dashboard",projects:"/projects","project-detail":"/projects/{projectId}",tasks:"/tasks","task-detail":"/tasks/{taskId}",risks:"/risks",incidents:"/incidents",milestones:"/milestones","knowledge-base":"/knowledge-base",compliance:"/compliance","compliance-calendar":"/compliance/calendar","entity-setup":"/wizard/entity","entity-detail":"/entity/{businessId}",governance:"/governance","governance-documents":"/governance/documents",policies:"/governance/policies","board-registry":"/governance/board","org-chart":"/hr/org-chart",roles:"/hr/roles",team:"/hr/team",contracts:"/hr/contracts",marketplace:"/marketplace",professionals:"/marketplace/professionals",partnerships:"/partnerships","partnership-detail":"/partnerships/{partnershipId}","operations-dashboard":"/operations/dashboard"}[e]||"/dashboard";return t&&Object.entries(t).forEach((e=>{let[t,a]=e;s=s.replace("{".concat(t,"}"),a)})),"".concat(a).concat(s)};class M{async log(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MNI";return _(this.userId,this.companyId,e,t,a)}async projectCreated(e){return this.log(L.PROJECT_CREATED,e)}async projectUpdated(e){return this.log(L.PROJECT_UPDATED,e)}async taskCreated(e){return this.log(L.TASK_CREATED,e)}async taskStatusChanged(e,t,a){return this.log(L.TASK_STATUS_CHANGED,{taskId:e,oldStatus:t,newStatus:a})}async complianceCompleted(e,t){return this.log(L.COMPLIANCE_COMPLETED,{obligationId:e,obligationName:t})}async partnershipSigned(e,t){return this.log(L.PARTNERSHIP_SIGNED,{partnershipId:e,partners:t})}async riskIdentified(e){return this.log(L.RISK_IDENTIFIED,e)}async incidentReported(e){return this.log(L.INCIDENT_REPORTED,e)}constructor(e,t){this.userId=e,this.companyId=t}}const U=e=>{const{user:t}=(0,h.a)(),[a,s]=(0,l.useState)(null),[i,n]=(0,l.useState)([]),[r,o]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null),m=(0,l.useCallback)((e=>{const t=(null===e||void 0===e?void 0:e.message)||"Failed to load BizHelp data";d(t)}),[]);(0,l.useEffect)((()=>{if(!t||!e)return void o(!1);o(!0),d(null);const a=R(e,(e=>{s(e)}),m),l=Z(t.id,e,(e=>{n(e)}),m);return o(!1),()=>{a(),l()}}),[t,e,m]);return{business:a,activities:i,loading:r,error:c,activityLogger:t&&e?new M(t.id,e):null,refresh:(0,l.useCallback)((()=>{e&&t&&o(!0)}),[e,t])}};var F=a(16504);const B=e=>{let{status:t,label:a,icon:l}=e;return(0,s.jsxs)("div",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ".concat({registered:"bg-green-100 text-green-800",applying:"bg-blue-100 text-blue-800",formalized:"bg-purple-100 text-purple-800",planning:"bg-gray-100 text-gray-800",overdue:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800"}[t]||"bg-gray-100 text-gray-800"),children:[l,(0,s.jsx)("span",{children:a})]})},z=e=>{let{title:t,description:a,icon:l,action:i,params:n,onClick:r}=e;return(0,s.jsxs)(F.aj,{onClick:()=>{const e=O(i,n);r(e)},className:"flex items-start gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",ariaLabel:"Navigate to ".concat(t," in BizHelp"),children:[(0,s.jsx)("div",{className:"text-blue-600 mt-1 flex-shrink-0",children:l}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:t}),(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate",children:a})]}),(0,s.jsx)(D.Z,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})]})},G=e=>{let{companyId:t,compact:a=!1,onNavigate:i}=e;var n,r,o;const{business:d,activities:m,loading:p,error:x}=U(t),g=(0,l.useMemo)((()=>{var e,t,a,s,l,i;return d?{stage:d.stage,entityType:d.type,teamSize:(null===(e=d.operations)||void 0===e?void 0:e.activeTeam)||0,projects:(null===(t=d.operations)||void 0===t?void 0:t.projects)||0,complianceIssues:(null===(s=d.compliance)||void 0===s||null===(a=s.obligations)||void 0===a?void 0:a.filter((e=>"overdue"===e.status)).length)||0,totalObligations:(null===(i=d.compliance)||void 0===i||null===(l=i.obligations)||void 0===l?void 0:l.length)||0}:null}),[d]),h=e=>{i?i(e):window.open(e,"_blank")};return p?(0,s.jsx)("div",{className:"p-6 bg-white rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/3"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-2/3"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded animate-pulse"})]})]})}):x||!d?(0,s.jsx)("div",{className:"p-6 bg-red-50 rounded-lg border border-red-200",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-red-900",children:"BizHelp Data Not Available"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:x||"Unable to load BizHelp business data. Please try again."})]})]})}):a&&g?(0,s.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"w-4 h-4 text-blue-600"}),d.name]}),(0,s.jsx)(B,{status:g.stage,label:g.stage,icon:(0,s.jsx)(k.Z,{className:"w-3 h-3"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:g.projects}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Projects"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:g.teamSize}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Team Members"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(g.complianceIssues>0?"text-red-600":"text-green-600"),children:g.complianceIssues}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Overdue"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(F.aj,{onClick:()=>h(O("dashboard")),className:"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded text-sm font-medium hover:bg-blue-700 transition-colors",ariaLabel:"Open BizHelp Dashboard",children:[(0,s.jsx)(D.Z,{className:"w-3 h-3"}),"BizHelp Dashboard"]}),(0,s.jsxs)(F.aj,{onClick:()=>h(O("operations-dashboard")),className:"flex items-center justify-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded text-sm font-medium hover:bg-indigo-700 transition-colors",ariaLabel:"Open Operations Dashboard",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3"}),"Operations"]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg p-6 text-white",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:d.name}),(0,s.jsxs)("p",{className:"text-blue-100",children:[d.type," \u2022 ","registered"===d.stage?"Registered & Active":"Status: ".concat(d.stage)]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-blue-100 mb-1",children:"Registration"}),(0,s.jsx)("p",{className:"font-mono text-lg",children:(null===(n=d.registration)||void 0===n?void 0:n.cipcNumber)||"Pending"})]})]}),(null===(r=d.registration)||void 0===r?void 0:r.registeredDate)&&(0,s.jsxs)("p",{className:"text-sm text-blue-100",children:["Registered: ",new Date(d.registration.registeredDate).toLocaleDateString()]})]}),g&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Active Projects"}),(0,s.jsx)(E.Z,{className:"w-4 h-4 text-blue-600"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:g.projects})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Team Members"}),(0,s.jsx)(u.Z,{className:"w-4 h-4 text-green-600"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:g.teamSize})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Compliance Items"}),(0,s.jsx)(S,{className:"w-4 h-4 text-purple-600"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:g.totalObligations})]}),(0,s.jsxs)("div",{className:"rounded-lg p-4 border-2 ".concat(g.complianceIssues>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-sm ".concat(g.complianceIssues>0?"text-red-700":"text-green-700"),children:"Overdue Items"}),g.complianceIssues>0?(0,s.jsx)(C.Z,{className:"w-4 h-4 text-red-600"}):(0,s.jsx)(k.Z,{className:"w-4 h-4 text-green-600"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold ".concat(g.complianceIssues>0?"text-red-600":"text-green-600"),children:g.complianceIssues})]})]}),(null===(o=d.compliance)||void 0===o?void 0:o.obligations)&&d.compliance.obligations.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(A.Z,{className:"w-5 h-5 text-orange-600"}),"Upcoming Compliance Obligations"]}),(0,s.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:d.compliance.obligations.slice(0,5).map((e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]}),(0,s.jsx)(B,{status:e.status,label:e.status})]},e.id)))}),(0,s.jsx)(F.aj,{onClick:()=>h(O("compliance-calendar")),className:"mt-4 w-full px-4 py-2 text-center text-sm font-medium text-blue-600 border border-blue-200 rounded hover:bg-blue-50 transition-colors",ariaLabel:"View all compliance obligations",children:"View All Obligations \u2192"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(T.Z,{className:"w-5 h-5 text-indigo-600"}),"Quick Access to BizHelp Operations"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsx)(z,{title:"Projects & Delivery",description:"Manage projects, milestones, and deliverables",icon:(0,s.jsx)(E.Z,{className:"w-5 h-5"}),action:"projects",onClick:h}),(0,s.jsx)(z,{title:"Compliance Calendar",description:"Track regulatory obligations and deadlines",icon:(0,s.jsx)(A.Z,{className:"w-5 h-5"}),action:"compliance-calendar",onClick:h}),(0,s.jsx)(z,{title:"Organization Chart",description:"View team structure and responsibilities",icon:(0,s.jsx)(u.Z,{className:"w-5 h-5"}),action:"org-chart",onClick:h}),(0,s.jsx)(z,{title:"Partnerships",description:"Manage strategic partnerships and agreements",icon:(0,s.jsx)(E.Z,{className:"w-5 h-5"}),action:"partnerships",onClick:h}),(0,s.jsx)(z,{title:"Governance",description:"Board registry, policies, and meeting minutes",icon:(0,s.jsx)(S,{className:"w-5 h-5"}),action:"governance",onClick:h}),(0,s.jsx)(z,{title:"Risk Register",description:"Track and manage identified risks",icon:(0,s.jsx)(C.Z,{className:"w-5 h-5"}),action:"risks",onClick:h})]})]}),m.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Recent Activities"}),(0,s.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:m.slice(0,8).map((e=>(0,s.jsxs)("div",{className:"flex items-start gap-3 pb-3 border-b border-gray-100 last:border-0",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-600 mt-1.5"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.type.replace(/_/g," ")}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-white bg-blue-500 text-xs",children:e.source}),new Date(e.timestamp).toLocaleDateString()]})]})]},e.id)))})]})]})};var H=a(17909),J=a(53487),K=a(19078),q=a(17911);const V=e=>e.includes("created")||e.includes("added")?(0,s.jsx)(H.Z,{className:"w-4 h-4 text-blue-600"}):e.includes("completed")||e.includes("success")?(0,s.jsx)(k.Z,{className:"w-4 h-4 text-green-600"}):e.includes("error")||e.includes("overdue")?(0,s.jsx)(C.Z,{className:"w-4 h-4 text-red-600"}):e.includes("updated")||e.includes("changed")?(0,s.jsx)(c.Z,{className:"w-4 h-4 text-orange-600"}):(0,s.jsx)(A.Z,{className:"w-4 h-4 text-gray-600"}),X=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),Q=e=>{if(!e)return"Just now";const t=e.toDate?e.toDate():new Date(e),a=(new Date).getTime()-t.getTime();if(a<6e4)return"Just now";if(a<36e5){const e=Math.floor(a/6e4);return"".concat(e,"m ago")}if(a<864e5){const e=Math.floor(a/36e5);return"".concat(e,"h ago")}if(a<6048e5){const e=Math.floor(a/864e5);return"".concat(e,"d ago")}return t.toLocaleDateString()},W=e=>{let{source:t}=e;return(0,s.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat({MNI:"bg-blue-100 text-blue-800",BizHelp:"bg-indigo-100 text-indigo-800",Hub:"bg-purple-100 text-purple-800"}[t]||"bg-gray-100 text-gray-800"),children:t})},Y=e=>{let{companyId:t,maxItems:a=50,filterByType:i,filterBySource:n=["MNI","BizHelp","Hub"],compact:r=!1,onActivityClick:o}=e;const{activities:c,loading:d,error:m}=U(t),[u,p]=(0,l.useState)(""),[x,g]=(0,l.useState)(null),[h,y]=(0,l.useState)(null),[v,b]=(0,l.useState)(!1),j=(0,l.useMemo)((()=>c.filter((e=>{if(x&&e.type!==x)return!1;if(i&&!i.includes(e.type))return!1;if(h&&e.source!==h)return!1;if(!n.includes(e.source))return!1;if(u){const t=u.toLowerCase();return e.type.toLowerCase().includes(t)||e.source.toLowerCase().includes(t)||JSON.stringify(e.data).toLowerCase().includes(t)}return!0})).slice(0,a)),[c,u,x,h,i,n,a]),f=(0,l.useMemo)((()=>[...new Set(c.map((e=>e.type)))]),[c]),N=(0,l.useMemo)((()=>({total:c.length,mni:c.filter((e=>"MNI"===e.source)).length,bizhelp:c.filter((e=>"BizHelp"===e.source)).length,hub:c.filter((e=>"Hub"===e.source)).length})),[c]);return d?(0,s.jsx)("div",{className:"p-6 bg-white rounded-lg border border-gray-200",children:(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map((e=>(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded animate-pulse"},e)))})}):m?(0,s.jsx)("div",{className:"p-6 bg-red-50 rounded-lg border border-red-200",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-red-900",children:"Failed to Load Activity Feed"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:m})]})]})}):r?(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-gray-200",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Recent Activities"}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===j.length?(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No activities yet"}):j.map((e=>(0,s.jsxs)("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-1",children:V(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 capitalize",children:X(e.type)}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(W,{source:e.source}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:Q(e.timestamp)})]})]})]},e.id)))})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Activities"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:N.total})]}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,s.jsx)("p",{className:"text-sm text-blue-600 mb-1",children:"From MNI"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:N.mni})]}),(0,s.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200",children:[(0,s.jsx)("p",{className:"text-sm text-indigo-600 mb-1",children:"From BizHelp"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-indigo-900",children:N.bizhelp})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,s.jsx)("p",{className:"text-sm text-purple-600 mb-1",children:"From Hub"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:N.hub})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(J.Z,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search activities...",value:u,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)(F.aj,{onClick:()=>b(!v),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",ariaLabel:"Toggle filters",children:[(0,s.jsx)(K.Z,{className:"w-4 h-4"}),"Filters"]})]}),v&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity Type"}),(0,s.jsxs)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(0,s.jsxs)(F.aj,{onClick:()=>g(null),className:"w-full text-left px-3 py-2 rounded text-sm ".concat(null===x?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100"),ariaLabel:"Clear type filter",children:["All Types (",f.length,")"]}),f.map((e=>(0,s.jsx)(F.aj,{onClick:()=>g(e),className:"w-full text-left px-3 py-2 rounded text-sm capitalize ".concat(x===e?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100"),ariaLabel:"Filter by ".concat(e),children:X(e)},e)))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(F.aj,{onClick:()=>y(null),className:"w-full text-left px-3 py-2 rounded text-sm ".concat(null===h?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100"),ariaLabel:"Clear source filter",children:"All Sources"}),["MNI","BizHelp","Hub"].map((e=>(0,s.jsxs)(F.aj,{onClick:()=>y(e),className:"w-full text-left px-3 py-2 rounded text-sm ".concat(h===e?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100"),ariaLabel:"Filter by ".concat(e),children:[(0,s.jsx)(W,{source:e}),(0,s.jsx)("span",{className:"ml-2",children:e})]},e)))]})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:0===j.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(A.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 font-medium",children:"No activities found"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:u?"Try adjusting your search":"Activities will appear here"})]}):(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:j.map(((e,t)=>(0,s.jsxs)(F.aj,{onClick:()=>null===o||void 0===o?void 0:o(e),className:"w-full text-left px-6 py-4 hover:bg-gray-50 transition-colors flex items-start gap-4",ariaLabel:"Activity: ".concat(X(e.type)),children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-1",children:V(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:X(e.type)}),e.data&&Object.keys(e.data).length>0&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:Object.entries(e.data).slice(0,2).map((e=>{let[t,a]=e;return"".concat(t,": ").concat(String(a).substring(0,20))})).join(" \u2022 ")})]}),(0,s.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,s.jsx)(W,{source:e.source}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:Q(e.timestamp)})]})]}),e.userId&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-xs text-gray-500",children:[(0,s.jsx)(q.Z,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:["By ",e.userId]})]})]})]},e.id||t)))})}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[(0,s.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,s.jsx)("strong",{children:"Showing:"})," ",j.length," of ",N.total," activities"]}),(0,s.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Activities are synced in real-time between MNI, BizHelp, and Hub platforms."})]})]})};var $=a(11373);const ee=(0,I.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var te=a(76919),ae=a(4021),se=a(91560),le=a(36460),ie=a(22972),ne=a(63999);class re{async getCompanyProfile(){try{const s=(0,v.JU)(y.db,"companies",this.companyId),l=await(0,v.QT)(s);if(l.exists()){var e,t,a;const s=l.data();return{...s,incorporationDate:(null===(e=s.incorporationDate)||void 0===e?void 0:e.toDate())||new Date,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(a=s.updatedAt)||void 0===a?void 0:a.toDate())||new Date}}return null}catch(s){throw new Error("Failed to get company profile")}}async createCompanyProfile(e){try{const t=(0,v.JU)(y.db,"companies",this.companyId),a={...e,id:this.companyId,incorporationDate:v.EK.fromDate(e.incorporationDate),createdAt:v.EK.fromDate(new Date),updatedAt:v.EK.fromDate(new Date)};await(0,v.pl)(t,a)}catch(t){throw new Error("Failed to create company profile")}}async updateCompanyProfile(e){try{const t=(0,v.JU)(y.db,"companies",this.companyId),a={...e,updatedAt:v.EK.fromDate(new Date)};e.incorporationDate&&(a.incorporationDate=v.EK.fromDate(e.incorporationDate)),await(0,v.r7)(t,a)}catch(t){throw new Error("Failed to update company profile")}}async getConstitution(){try{const t=(0,v.JU)(y.db,"companies",this.companyId,"governance","constitution"),a=await(0,v.QT)(t);if(a.exists()){var e;const t=a.data();return{...t,lastUpdated:(null===(e=t.lastUpdated)||void 0===e?void 0:e.toDate())||new Date}}return{content:"",lastUpdated:new Date,approvedBy:[]}}catch(t){throw new Error("Failed to get constitution")}}async updateConstitution(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"governance","constitution");await(0,v.pl)(a,{content:e,lastUpdated:v.EK.fromDate(new Date),approvedBy:t})}catch(a){throw new Error("Failed to update constitution")}}async getPolicies(){try{const e=(0,v.hJ)(y.db,"companies",this.companyId,"policies"),t=((0,v.IO)(e,(0,v.Xo)("effectiveDate","desc")),await(0,v.QT)((0,v.JU)(y.db,"companies",this.companyId,"governance","policies")));if(t.exists()){return(t.data().policies||[]).map((e=>{var t;return{...e,effectiveDate:(null===(t=e.effectiveDate)||void 0===t?void 0:t.toDate())||new Date}}))}return[]}catch(e){throw new Error("Failed to get policies")}}async createPolicy(e){try{const t=(0,v.hJ)(y.db,"companies",this.companyId,"policies"),a={...e,id:"policy_".concat(Date.now()),effectiveDate:v.EK.fromDate(e.effectiveDate)};return await(0,v.ET)(t,a),a.id}catch(t){throw new Error("Failed to create policy")}}async updatePolicy(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"policies",e),s={...t};t.effectiveDate&&(s.effectiveDate=v.EK.fromDate(t.effectiveDate)),await(0,v.r7)(a,s)}catch(a){throw new Error("Failed to update policy")}}async acknowledgePolicy(e,t,a,s){try{const l={userId:t,userName:a,acknowledgedAt:new Date,version:s},i=(0,v.JU)(y.db,"companies",this.companyId,"policies",e),n=await(0,v.QT)(i);if(n.exists()){const e=n.data().acknowledgments||[];e.push(l),await(0,v.r7)(i,{acknowledgments:e})}}catch(l){throw new Error("Failed to acknowledge policy")}}async getComplianceRecords(){try{const e=(0,v.hJ)(y.db,"companies",this.companyId,"compliance"),t=((0,v.IO)(e,(0,v.Xo)("dueDate","asc")),await(0,v.QT)((0,v.JU)(y.db,"companies",this.companyId,"governance","compliance")));if(t.exists()){return(t.data().records||[]).map((e=>{var t,a;return{...e,dueDate:(null===(t=e.dueDate)||void 0===t?void 0:t.toDate())||new Date,completedAt:null===(a=e.completedAt)||void 0===a?void 0:a.toDate()}}))}return[]}catch(e){throw new Error("Failed to get compliance records")}}async createComplianceRecord(e){try{const t=(0,v.hJ)(y.db,"companies",this.companyId,"compliance"),a={...e,id:"compliance_".concat(Date.now()),dueDate:v.EK.fromDate(e.dueDate),completedAt:e.completedAt?v.EK.fromDate(e.completedAt):null};return await(0,v.ET)(t,a),a.id}catch(t){throw new Error("Failed to create compliance record")}}async updateComplianceRecord(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"compliance",e),s={...t};t.dueDate&&(s.dueDate=v.EK.fromDate(t.dueDate)),t.completedAt&&(s.completedAt=v.EK.fromDate(t.completedAt)),await(0,v.r7)(a,s)}catch(a){throw new Error("Failed to update compliance record")}}async getBoardMembers(){try{const e=(0,v.hJ)(y.db,"companies",this.companyId,"board"),t=((0,v.IO)(e,(0,v.Xo)("appointedDate","desc")),await(0,v.QT)((0,v.JU)(y.db,"companies",this.companyId,"governance","board")));if(t.exists()){return(t.data().members||[]).map((e=>{var t,a;return{...e,appointedDate:(null===(t=e.appointedDate)||void 0===t?void 0:t.toDate())||new Date,termEnd:null===(a=e.termEnd)||void 0===a?void 0:a.toDate()}}))}return[]}catch(e){throw new Error("Failed to get board members")}}async addBoardMember(e){try{const t=(0,v.hJ)(y.db,"companies",this.companyId,"board"),a={...e,id:"board_".concat(Date.now()),appointedDate:v.EK.fromDate(e.appointedDate),termEnd:e.termEnd?v.EK.fromDate(e.termEnd):null};return await(0,v.ET)(t,a),a.id}catch(t){throw new Error("Failed to add board member")}}async updateBoardMember(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"board",e),s={...t};t.appointedDate&&(s.appointedDate=v.EK.fromDate(t.appointedDate)),t.termEnd&&(s.termEnd=v.EK.fromDate(t.termEnd)),await(0,v.r7)(a,s)}catch(a){throw new Error("Failed to update board member")}}async getBoardMeetings(){try{const e=(0,v.hJ)(y.db,"companies",this.companyId,"meetings"),t=((0,v.IO)(e,(0,v.Xo)("date","desc")),await(0,v.QT)((0,v.JU)(y.db,"companies",this.companyId,"governance","meetings")));if(t.exists()){return(t.data().meetings||[]).map((e=>{var t;return{...e,date:(null===(t=e.date)||void 0===t?void 0:t.toDate())||new Date}}))}return[]}catch(e){throw new Error("Failed to get board meetings")}}async createBoardMeeting(e){try{const t=(0,v.hJ)(y.db,"companies",this.companyId,"meetings"),a={...e,id:"meeting_".concat(Date.now()),date:v.EK.fromDate(e.date)};return await(0,v.ET)(t,a),a.id}catch(t){throw new Error("Failed to create board meeting")}}async updateBoardMeeting(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"meetings",e),s={...t};t.date&&(s.date=v.EK.fromDate(t.date)),await(0,v.r7)(a,s)}catch(a){throw new Error("Failed to update board meeting")}}subscribeToCompanyProfile(e){const t=(0,v.JU)(y.db,"companies",this.companyId);return(0,v.cf)(t,(t=>{if(t.exists()){var a,s,l;const i=t.data(),n={...i,incorporationDate:(null===(a=i.incorporationDate)||void 0===a?void 0:a.toDate())||new Date,createdAt:(null===(s=i.createdAt)||void 0===s?void 0:s.toDate())||new Date,updatedAt:(null===(l=i.updatedAt)||void 0===l?void 0:l.toDate())||new Date};e(n)}else e(null)}))}subscribeToPolicies(e){const t=(0,v.hJ)(y.db,"companies",this.companyId,"policies"),a=(0,v.IO)(t,(0,v.Xo)("effectiveDate","desc"));return(0,v.cf)(a,(t=>{const a=[];t.forEach((e=>{var t;const s=e.data();a.push({...s,effectiveDate:(null===(t=s.effectiveDate)||void 0===t?void 0:t.toDate())||new Date})})),e(a)}))}subscribeToComplianceRecords(e){const t=(0,v.hJ)(y.db,"companies",this.companyId,"compliance"),a=(0,v.IO)(t,(0,v.Xo)("dueDate","asc"));return(0,v.cf)(a,(t=>{const a=[];t.forEach((e=>{var t,s;const l=e.data();a.push({...l,dueDate:(null===(t=l.dueDate)||void 0===t?void 0:t.toDate())||new Date,completedAt:null===(s=l.completedAt)||void 0===s?void 0:s.toDate()})})),e(a)}))}subscribeToBoardMembers(e){const t=(0,v.hJ)(y.db,"companies",this.companyId,"board"),a=(0,v.IO)(t,(0,v.Xo)("appointedDate","desc"));return(0,v.cf)(a,(t=>{const a=[];t.forEach((e=>{var t,s;const l=e.data();a.push({...l,appointedDate:(null===(t=l.appointedDate)||void 0===t?void 0:t.toDate())||new Date,termEnd:null===(s=l.termEnd)||void 0===s?void 0:s.toDate()})})),e(a)}))}subscribeToBoardMeetings(e){const t=(0,v.hJ)(y.db,"companies",this.companyId,"meetings"),a=(0,v.IO)(t,(0,v.Xo)("date","desc"));return(0,v.cf)(a,(t=>{const a=[];t.forEach((e=>{var t;const s=e.data();a.push({...s,date:(null===(t=s.date)||void 0===t?void 0:t.toDate())||new Date})})),e(a)}))}constructor(e){this.companyId=e}}const oe=()=>{var e,t,a,s,i,n,r,o,c,d,m,u,p;const{state:x,dispatch:g,updateCompanyProfile:h,logAuditEvent:y}=w(),[v,b]=(0,l.useState)(null);(0,l.useEffect)((()=>{var e,t;(null===(e=x.company)||void 0===e?void 0:e.id)&&!v&&b((t=x.company.id,new re(t)))}),[null===(e=x.company)||void 0===e?void 0:e.id,v]);const j=(0,l.useCallback)((async()=>{if(v)try{g({type:"SET_LOADING",module:"company",loading:!0});const e=await v.getCompanyProfile();e&&g({type:"SET_COMPANY",company:e})}catch(e){g({type:"SET_ERROR",error:"Failed to load company profile"})}finally{g({type:"SET_LOADING",module:"company",loading:!1})}}),[v,g]),f=(0,l.useCallback)((async e=>{var t;if(v&&(null===(t=x.company)||void 0===t?void 0:t.id))try{g({type:"SET_LOADING",module:"company",loading:!0}),await v.createCompanyProfile(e),await y("create","company",x.company.id,e),await j()}catch(a){throw g({type:"SET_ERROR",error:"Failed to create company profile"}),a}finally{g({type:"SET_LOADING",module:"company",loading:!1})}}),[v,null===(t=x.company)||void 0===t?void 0:t.id,g,y,j]),N=(0,l.useCallback)((async e=>{var t;if(null===(t=x.company)||void 0===t?void 0:t.id)try{g({type:"SET_LOADING",module:"company",loading:!0}),await h(x.company.id,e),await y("update","company",x.company.id,e),await j()}catch(a){throw g({type:"SET_ERROR",error:"Failed to update company profile"}),a}finally{g({type:"SET_LOADING",module:"company",loading:!1})}}),[null===(a=x.company)||void 0===a?void 0:a.id,g,h,y,j]),D=(0,l.useCallback)((async()=>{if(!v)return null;try{return await v.getConstitution()}catch(e){return g({type:"SET_ERROR",error:"Failed to get constitution"}),null}}),[v,g]),C=(0,l.useCallback)((async(e,t)=>{var a;if(v&&(null===(a=x.company)||void 0===a?void 0:a.id))try{g({type:"SET_LOADING",module:"governance",loading:!0}),await v.updateConstitution(e,t),await y("update","constitution",x.company.id,{content:e,approvedBy:t}),g({type:"UPDATE_GOVERNANCE",data:{constitution:{content:e,lastUpdated:new Date,approvedBy:t}}})}catch(s){throw g({type:"SET_ERROR",error:"Failed to update constitution"}),s}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(s=x.company)||void 0===s?void 0:s.id,g,y]),E=(0,l.useCallback)((async()=>{if(v)try{g({type:"SET_LOADING",module:"governance",loading:!0});const e=await v.getPolicies();g({type:"UPDATE_GOVERNANCE",data:{policies:e}})}catch(e){g({type:"SET_ERROR",error:"Failed to load policies"})}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,g]),k=(0,l.useCallback)((async e=>{var t;if(v&&(null===(t=x.company)||void 0===t?void 0:t.id))try{g({type:"SET_LOADING",module:"governance",loading:!0});const t=await v.createPolicy(e);return await y("create","policy",t,e),await E(),t}catch(a){throw g({type:"SET_ERROR",error:"Failed to create policy"}),a}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(i=x.company)||void 0===i?void 0:i.id,g,y,E]),I=(0,l.useCallback)((async(e,t)=>{var a;if(v&&(null===(a=x.company)||void 0===a?void 0:a.id))try{g({type:"SET_LOADING",module:"governance",loading:!0}),await v.updatePolicy(e,t),await y("update","policy",e,t),await E()}catch(s){throw g({type:"SET_ERROR",error:"Failed to update policy"}),s}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(n=x.company)||void 0===n?void 0:n.id,g,y,E]),S=(0,l.useCallback)((async(e,t,a,s)=>{var l;if(v&&(null===(l=x.company)||void 0===l?void 0:l.id))try{await v.acknowledgePolicy(e,t,a,s),await y("acknowledge","policy",e,{userId:t,userName:a,version:s}),await E()}catch(i){throw g({type:"SET_ERROR",error:"Failed to acknowledge policy"}),i}}),[v,null===(r=x.company)||void 0===r?void 0:r.id,g,y,E]),A=(0,l.useCallback)((async()=>{if(v)try{g({type:"SET_LOADING",module:"governance",loading:!0});const e=await v.getComplianceRecords();g({type:"UPDATE_GOVERNANCE",data:{compliance:e}})}catch(e){g({type:"SET_ERROR",error:"Failed to load compliance records"})}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,g]),T=(0,l.useCallback)((async e=>{var t;if(v&&(null===(t=x.company)||void 0===t?void 0:t.id))try{g({type:"SET_LOADING",module:"governance",loading:!0});const t=await v.createComplianceRecord(e);return await y("create","compliance",t,e),await A(),t}catch(a){throw g({type:"SET_ERROR",error:"Failed to create compliance record"}),a}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(o=x.company)||void 0===o?void 0:o.id,g,y,A]),P=(0,l.useCallback)((async(e,t)=>{var a;if(v&&(null===(a=x.company)||void 0===a?void 0:a.id))try{g({type:"SET_LOADING",module:"governance",loading:!0}),await v.updateComplianceRecord(e,t),await y("update","compliance",e,t),await A()}catch(s){throw g({type:"SET_ERROR",error:"Failed to update compliance record"}),s}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(c=x.company)||void 0===c?void 0:c.id,g,y,A]),R=(0,l.useCallback)((async()=>{if(v)try{g({type:"SET_LOADING",module:"governance",loading:!0});const e=await v.getBoardMembers();g({type:"UPDATE_GOVERNANCE",data:{board:e}})}catch(e){g({type:"SET_ERROR",error:"Failed to load board members"})}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,g]),_=(0,l.useCallback)((async e=>{var t;if(v&&(null===(t=x.company)||void 0===t?void 0:t.id))try{g({type:"SET_LOADING",module:"governance",loading:!0});const t=await v.addBoardMember(e);return await y("create","board_member",t,e),await R(),t}catch(a){throw g({type:"SET_ERROR",error:"Failed to add board member"}),a}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(d=x.company)||void 0===d?void 0:d.id,g,y,R]),Z=(0,l.useCallback)((async(e,t)=>{var a;if(v&&(null===(a=x.company)||void 0===a?void 0:a.id))try{g({type:"SET_LOADING",module:"governance",loading:!0}),await v.updateBoardMember(e,t),await y("update","board_member",e,t),await R()}catch(s){throw g({type:"SET_ERROR",error:"Failed to update board member"}),s}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(m=x.company)||void 0===m?void 0:m.id,g,y,R]),L=(0,l.useCallback)((async()=>{if(v)try{g({type:"SET_LOADING",module:"governance",loading:!0});const e=await v.getBoardMeetings();g({type:"UPDATE_GOVERNANCE",data:{meetings:e}})}catch(e){g({type:"SET_ERROR",error:"Failed to load board meetings"})}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,g]),O=(0,l.useCallback)((async e=>{var t;if(v&&(null===(t=x.company)||void 0===t?void 0:t.id))try{g({type:"SET_LOADING",module:"governance",loading:!0});const t=await v.createBoardMeeting(e);return await y("create","board_meeting",t,e),await L(),t}catch(a){throw g({type:"SET_ERROR",error:"Failed to create board meeting"}),a}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(u=x.company)||void 0===u?void 0:u.id,g,y,L]),M=(0,l.useCallback)((async(e,t)=>{var a;if(v&&(null===(a=x.company)||void 0===a?void 0:a.id))try{g({type:"SET_LOADING",module:"governance",loading:!0}),await v.updateBoardMeeting(e,t),await y("update","board_meeting",e,t),await L()}catch(s){throw g({type:"SET_ERROR",error:"Failed to update board meeting"}),s}finally{g({type:"SET_LOADING",module:"governance",loading:!1})}}),[v,null===(p=x.company)||void 0===p?void 0:p.id,g,y,L]),U=(0,l.useCallback)((async()=>{await Promise.all([j(),E(),A(),R(),L()])}),[j,E,A,R,L]);return{company:x.company,governance:x.governance,loading:x.loading.governance,error:x.error,loadCompanyProfile:j,createCompanyProfile:f,updateCompanyProfile:N,getConstitution:D,updateConstitution:C,loadPolicies:E,createPolicy:k,updatePolicy:I,acknowledgePolicy:S,loadComplianceRecords:A,createComplianceRecord:T,updateComplianceRecord:P,loadBoardMembers:R,addBoardMember:_,updateBoardMember:Z,loadBoardMeetings:L,createBoardMeeting:O,updateBoardMeeting:M,loadAllGovernanceData:U}},ce=e=>{let{className:t}=e;var a,i,n,r,c,d,u,p;const{company:x,loading:g,error:h,loadCompanyProfile:y,createCompanyProfile:v,updateCompanyProfile:b}=oe(),{activityLogger:j}=U((null===x||void 0===x?void 0:x.id)||""),[f,N]=(0,l.useState)(!1),[w,D]=(0,l.useState)({}),[C,E]=(0,l.useState)(""),[k,I]=(0,l.useState)("");(0,l.useEffect)((()=>{x&&D(x)}),[x]),(0,l.useEffect)((()=>{y()}),[y]);const S=(e,t)=>{D((a=>({...a,[e]:t})))},A=(e,t)=>{D((a=>({...a,address:{...a.address,[e]:t}})))},T=(e,t)=>{D((a=>({...a,contact:{...a.contact,[e]:t}})))},P=()=>{if(C.trim()){const e=w.directors||[];D((t=>({...t,directors:[...e,C.trim()]}))),E("")}},R=()=>{if(k.trim()){const e=w.shareholders||[];D((t=>({...t,shareholders:[...e,k.trim()]}))),I("")}};return g?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,s.jsx)($.Z,{className:"h-8 w-8 animate-spin text-blue-600"})})}):h?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,s.jsxs)("div",{className:"text-center text-red-600",children:[(0,s.jsxs)("p",{children:["Error loading company profile: ",h]}),(0,s.jsx)("button",{onClick:y,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})}):(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-blue-600"}),"Company Profile"]}),!f&&(0,s.jsxs)("button",{onClick:()=>N(!0),className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)(ee,{className:"h-4 w-4"}),"Edit"]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Company Name",id:"name",value:w.name||"",onChange:e=>S("name",e.target.value),placeholder:"Enter company name",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Registration Number",id:"registrationNumber",value:w.registrationNumber||"",onChange:e=>S("registrationNumber",e.target.value),placeholder:"Enter registration number",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Tax ID",id:"taxId",value:w.taxId||"",onChange:e=>S("taxId",e.target.value),placeholder:"Enter tax ID",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Jurisdiction",id:"jurisdiction",value:w.jurisdiction||"",onChange:e=>S("jurisdiction",e.target.value),placeholder:"Enter jurisdiction",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Incorporation Date",id:"incorporationDate",type:"date",value:w.incorporationDate?new Date(w.incorporationDate).toISOString().split("T")[0]:"",onChange:e=>S("incorporationDate",new Date(e.target.value)),className:"w-full"}),(0,s.jsx)(F.SB,{label:"Status",value:w.status||"active",onChange:e=>S("status",e.target.value),options:[{value:"active",label:"Active"},{value:"dormant",label:"Dormant"},{value:"dissolved",label:"Dissolved"}],className:"w-full"})]}),(0,s.jsx)("hr",{className:"border-gray-200"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(te.Z,{className:"h-4 w-4"}),"Address"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Street Address",id:"street",value:(null===(a=w.address)||void 0===a?void 0:a.street)||"",onChange:e=>A("street",e.target.value),placeholder:"Enter street address",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"City",id:"city",value:(null===(i=w.address)||void 0===i?void 0:i.city)||"",onChange:e=>A("city",e.target.value),placeholder:"Enter city",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"State/Province",id:"state",value:(null===(n=w.address)||void 0===n?void 0:n.state)||"",onChange:e=>A("state",e.target.value),placeholder:"Enter state/province",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Country",id:"country",value:(null===(r=w.address)||void 0===r?void 0:r.country)||"",onChange:e=>A("country",e.target.value),placeholder:"Enter country",className:"w-full"}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(F.Pg,{label:"Postal Code",id:"postalCode",value:(null===(c=w.address)||void 0===c?void 0:c.postalCode)||"",onChange:e=>A("postalCode",e.target.value),placeholder:"Enter postal code",className:"w-full"})})]})]}),(0,s.jsx)("hr",{className:"border-gray-200"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(ae.Z,{className:"h-4 w-4"}),"Contact Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Email",id:"email",type:"email",value:(null===(d=w.contact)||void 0===d?void 0:d.email)||"",onChange:e=>T("email",e.target.value),placeholder:"Enter email address",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Phone",id:"phone",value:(null===(u=w.contact)||void 0===u?void 0:u.phone)||"",onChange:e=>T("phone",e.target.value),placeholder:"Enter phone number",className:"w-full"}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(F.Pg,{label:"Website",id:"website",type:"url",value:(null===(p=w.contact)||void 0===p?void 0:p.website)||"",onChange:e=>T("website",e.target.value),placeholder:"Enter website URL",className:"w-full"})})]})]}),(0,s.jsx)("hr",{className:"border-gray-200"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Directors"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:(w.directors||[]).map(((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full",children:[(0,s.jsx)("span",{className:"text-sm",children:e}),f&&(0,s.jsx)("button",{onClick:()=>(e=>{const t=w.directors||[];D((a=>({...a,directors:t.filter(((t,a)=>a!==e))})))})(t),className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(se.Z,{className:"h-3 w-3"})})]},t)))}),f&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{value:C,onChange:e=>E(e.target.value),placeholder:"Add director name",onKeyPress:e=>"Enter"===e.key&&P(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:P,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,s.jsx)(le.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsx)("hr",{className:"border-gray-200"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Shareholders"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:(w.shareholders||[]).map(((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full",children:[(0,s.jsx)("span",{className:"text-sm",children:e}),f&&(0,s.jsx)("button",{onClick:()=>(e=>{const t=w.shareholders||[];D((a=>({...a,shareholders:t.filter(((t,a)=>a!==e))})))})(t),className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(se.Z,{className:"h-3 w-3"})})]},t)))}),f&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{value:k,onChange:e=>I(e.target.value),placeholder:"Add shareholder name",onKeyPress:e=>"Enter"===e.key&&R(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:R,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,s.jsx)(le.Z,{className:"h-4 w-4"})})]})]}),f&&(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,s.jsxs)("button",{onClick:()=>{D(x||{}),N(!1),E(""),I("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)(ie.Z,{className:"h-4 w-4 mr-2 inline"}),"Cancel"]}),(0,s.jsxs)("button",{onClick:async()=>{try{if(x){const e=x.name,t=x.jurisdiction,a=x.status;if(await b(w),j){const s={};e!==w.name&&(s.name={from:e,to:w.name}),t!==w.jurisdiction&&(s.jurisdiction={from:t,to:w.jurisdiction}),a!==w.status&&(s.status={from:a,to:w.status}),await j.log("company_profile_updated",{companyName:w.name,jurisdiction:w.jurisdiction,registrationNumber:w.registrationNumber,status:w.status,changes:Object.keys(s).length>0?s:{status:"profile_updated"}})}}else await v(w),j&&await j.log("company_profile_created",{companyName:w.name||"Unnamed",jurisdiction:w.jurisdiction||"Unknown",registrationNumber:w.registrationNumber||"N/A"});N(!1)}catch(h){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)(ne.Z,{className:"h-4 w-4 mr-2 inline"}),"Save Changes"]})]})]})]})};var de=a(61796),me=a(59911),ue=a(83917);const pe=e=>{let{className:t}=e;const{governance:a,loading:i,error:n,loadComplianceRecords:r,createComplianceRecord:c,updateComplianceRecord:m}=oe(),{activityLogger:u}=U(""),p=(null===a||void 0===a?void 0:a.compliance)||[],[x,g]=(0,l.useState)(!1),[h,y]=(0,l.useState)(null),[v,b]=(0,l.useState)({type:"",description:"",dueDate:new Date,status:"pending",assignedTo:"",documents:[]});(0,l.useEffect)((()=>{r()}),[r]);const j=(e,t)=>{b((a=>({...a,[e]:t})))},f=e=>{switch(e){case"completed":return(0,s.jsx)(k.Z,{className:"h-5 w-5 text-green-500"});case"overdue":return(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-500"});default:return(0,s.jsx)(A.Z,{className:"h-5 w-5 text-yellow-500"})}},N=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}};return i?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading compliance records..."})]})}):n?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(de.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Compliance Records"}),(0,s.jsx)("p",{className:"text-gray-500",children:n})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(me.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Compliance Tracker"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Track regulatory compliance, policies, and audit requirements"})]})]}),(0,s.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"Add Compliance Record"]})]}),(x||h)&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:x?"Add Compliance Record":"Edit Compliance Record"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(F.Pg,{label:"Type",value:v.type||"",onChange:e=>j("type",e.target.value),placeholder:"e.g., Tax Filing, Audit, Regulatory Report",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Assigned To",value:v.assignedTo||"",onChange:e=>j("assignedTo",e.target.value),placeholder:"Person responsible",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Due Date",type:"date",value:v.dueDate?v.dueDate.toISOString().split("T")[0]:"",onChange:e=>j("dueDate",new Date(e.target.value)),className:"w-full"}),(0,s.jsx)(F.SB,{label:"Status",value:v.status||"pending",onChange:e=>j("status",e.target.value),options:[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"overdue",label:"Overdue"}],className:"w-full"})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(F.Pg,{label:"Description",value:v.description||"",onChange:e=>j("description",e.target.value),placeholder:"Detailed description of the compliance requirement",className:"w-full"})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{b({type:"",description:"",dueDate:new Date,status:"pending",assignedTo:"",documents:[]}),g(!1),y(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:x?async()=>{if(v.type&&v.description&&v.dueDate&&v.assignedTo)try{await c({type:v.type,description:v.description,dueDate:v.dueDate,status:v.status||"pending",assignedTo:v.assignedTo,documents:v.documents||[]}),u&&await u.log("compliance_obligation_created",{obligationType:v.type,description:v.description,dueDate:v.dueDate,assignedTo:v.assignedTo,status:v.status||"pending"}),b({type:"",description:"",dueDate:new Date,status:"pending",assignedTo:"",documents:[]}),g(!1)}catch(n){}}:async()=>{if(h&&v.type&&v.description&&v.dueDate&&v.assignedTo)try{const e=p.find((e=>e.id===h)),t=null===e||void 0===e?void 0:e.status;if(await m(h,{type:v.type,description:v.description,dueDate:v.dueDate,status:v.status||"pending",assignedTo:v.assignedTo,documents:v.documents||[]}),u){const e={};t!==v.status&&(e.status={from:t,to:v.status}),await u.log("compliance_status_updated",{obligationType:v.type,description:v.description,oldStatus:t,newStatus:v.status,changes:Object.keys(e).length>0?e:{status:"updated"}}),"completed"===v.status&&"completed"!==t&&await u.log("compliance_completed",{obligationType:v.type,description:v.description,completionDate:new Date,assignedTo:v.assignedTo})}b({type:"",description:"",dueDate:new Date,status:"pending",assignedTo:"",documents:[]}),y(null)}catch(n){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:x?"Add Record":"Update Record"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===p.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(me.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Compliance Records"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Start tracking your compliance requirements"}),(0,s.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add First Record"})]}):p.map((e=>(0,s.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[f(e.status),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.type}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full border ".concat(N(e.status)),children:e.status})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Due: ",e.dueDate.toLocaleDateString()]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(q.Z,{className:"h-4 w-4"}),e.assignedTo]}),e.documents.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ue.Z,{className:"h-4 w-4"}),e.documents.length," document",1!==e.documents.length?"s":""]})]})]})]}),(0,s.jsx)("button",{onClick:()=>(e=>{b(e),y(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit record",children:(0,s.jsx)(ee,{className:"h-4 w-4"})})]})},e.id)))})]})})},xe=(0,I.Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var ge=a(37663),he=a(26180),ye=a(69972);const ve=e=>{let{className:t}=e;var a;const{governance:i,loading:n,error:r,loadPolicies:c,createPolicy:m,updatePolicy:p,acknowledgePolicy:x,getConstitution:g,updateConstitution:h}=oe(),{activityLogger:y}=U(""),[v,b]=(0,l.useState)("constitution"),[j,f]=(0,l.useState)(!1),[N,w]=(0,l.useState)(null),[D,C]=(0,l.useState)(null),[E,I]=(0,l.useState)(""),[S,T]=(0,l.useState)([]),[P,R]=(0,l.useState)(!1),[_,Z]=(0,l.useState)({title:"",content:"",category:"",version:1,effectiveDate:new Date,approvedBy:[],acknowledgments:[],status:"draft"}),L=(null===i||void 0===i?void 0:i.policies)||[];(0,l.useEffect)((()=>{c(),O()}),[c]);const O=async()=>{try{const e=await g();e&&(I(e.content||""),T(e.approvedBy||[]))}catch(r){}},M=(e,t)=>{Z((a=>({...a,[e]:t})))},B=()=>{Z({title:"",content:"",category:"",version:1,effectiveDate:new Date,approvedBy:[],acknowledgments:[],status:"draft"}),f(!1),w(null),C(null),R(!1)},z=e=>{switch(e){case"active":return(0,s.jsx)(k.Z,{className:"h-4 w-4 text-green-500"});case"archived":return(0,s.jsx)(xe,{className:"h-4 w-4 text-gray-500"});default:return(0,s.jsx)(A.Z,{className:"h-4 w-4 text-yellow-500"})}},G=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}};return n?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading documents..."})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ue.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Document Repository"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Manage constitution, policies, and legal documents"})]})]})}),(0,s.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>b("constitution"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors ".concat("constitution"===v?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(ge.Z,{className:"h-4 w-4 inline mr-2"}),"Constitution"]}),(0,s.jsxs)("button",{onClick:()=>b("policies"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors ".concat("policies"===v?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(ue.Z,{className:"h-4 w-4 inline mr-2"}),"Policies (",L.length,")"]})]}),"constitution"===v&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Company Constitution"}),!P&&(0,s.jsxs)("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)(ee,{className:"h-4 w-4"}),"Edit Constitution"]})]}),P?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Constitution Content"}),(0,s.jsx)("textarea",{value:E,onChange:e=>I(e.target.value),rows:20,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical",placeholder:"Enter the company constitution..."})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:B,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:async()=>{if(E.trim())try{await h(E,S),y&&await y.log("governance_document_updated",{documentType:"constitution",approversCount:S.length,contentLength:E.length,timestamp:new Date}),R(!1)}catch(r){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Constitution"})]})]}):(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-6",children:E?(0,s.jsx)("div",{className:"prose max-w-none",children:(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-gray-700 font-sans",children:E})}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(ge.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Constitution"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your company constitution to establish governance framework"}),(0,s.jsx)("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create Constitution"})]})})]}),"policies"===v&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Company Policies"}),(0,s.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"Add Policy"]})]}),(j||N)&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:j?"Add New Policy":"Edit Policy"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(F.Pg,{label:"Policy Title",value:_.title||"",onChange:e=>M("title",e.target.value),placeholder:"Enter policy title",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Category",value:_.category||"",onChange:e=>M("category",e.target.value),placeholder:"e.g., HR, Finance, Operations",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Version",type:"number",value:(null===(a=_.version)||void 0===a?void 0:a.toString())||"1",onChange:e=>M("version",parseInt(e.target.value)||1),className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Effective Date",type:"date",value:_.effectiveDate?_.effectiveDate.toISOString().split("T")[0]:"",onChange:e=>M("effectiveDate",new Date(e.target.value)),className:"w-full"}),(0,s.jsx)(F.SB,{label:"Status",value:_.status||"draft",onChange:e=>M("status",e.target.value),options:[{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"archived",label:"Archived"}],className:"w-full"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Policy Content"}),(0,s.jsx)("textarea",{value:_.content||"",onChange:e=>M("content",e.target.value),rows:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical",placeholder:"Enter the policy content..."})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:B,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:j?async()=>{if(_.title&&_.content&&_.category)try{await m({title:_.title,content:_.content,category:_.category,version:_.version||1,effectiveDate:_.effectiveDate||new Date,approvedBy:_.approvedBy||[],acknowledgments:_.acknowledgments||[],status:_.status||"draft"}),y&&await y.log("governance_document_uploaded",{documentType:"policy",documentName:_.title,category:_.category,version:_.version||1,status:_.status||"draft"}),Z({title:"",content:"",category:"",version:1,effectiveDate:new Date,approvedBy:[],acknowledgments:[],status:"draft"}),f(!1)}catch(r){}}:async()=>{if(N&&_.title&&_.content&&_.category)try{const e=L.find((e=>e.id===N));await p(N,{title:_.title,content:_.content,category:_.category,version:_.version||1,effectiveDate:_.effectiveDate||new Date,approvedBy:_.approvedBy||[],acknowledgments:_.acknowledgments||[],status:_.status||"draft"}),y&&await y.log("document_version_created",{documentName:_.title,category:_.category,newVersion:(_.version||1)+1,oldVersion:(null===e||void 0===e?void 0:e.version)||1,status:_.status||"draft"}),Z({title:"",content:"",category:"",version:1,effectiveDate:new Date,approvedBy:[],acknowledgments:[],status:"draft"}),w(null)}catch(r){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:j?"Add Policy":"Update Policy"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===L.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(ue.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Policies"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Create company policies to establish operational guidelines"}),(0,s.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create First Policy"})]}):L.map((e=>{var t;return(0,s.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[z(e.status),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full border ".concat(G(e.status)),children:e.status}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:["v",e.version]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(he.Z,{className:"h-4 w-4"}),e.category]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Effective: ",e.effectiveDate.toLocaleDateString()]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),(null===(t=e.acknowledgments)||void 0===t?void 0:t.length)||0," acknowledgments"]})]}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm line-clamp-2",children:[e.content.substring(0,200),"..."]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>C(e.id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"View policy",children:(0,s.jsx)(ye.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(e=>{Z(e),w(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit policy",children:(0,s.jsx)(ee,{className:"h-4 w-4"})})]})]})},e.id)}))})]})]})})};var be=a(929);const je=(0,I.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),fe=(0,I.Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var Ne=a(33656);const we=e=>{let{className:t}=e;var a,i;const{governance:n,loading:r,error:c,loadBoardMembers:m,addBoardMember:p,updateBoardMember:x}=oe(),{activityLogger:g}=U(""),[h,y]=(0,l.useState)(!1),[v,b]=(0,l.useState)(null),[j,f]=(0,l.useState)({name:"",position:"",appointedDate:new Date,termEnd:void 0,contact:{email:"",phone:""},status:"active"});(0,l.useEffect)((()=>{m()}),[m]);const N=(null===n||void 0===n?void 0:n.board)||[],w=(e,t)=>{f("contact"===e?e=>({...e,contact:{...e.contact,...t}}):a=>({...a,[e]:t}))},D=e=>"active"===e?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200",C=e=>e.toLowerCase().includes("chair")||e.toLowerCase().includes("president");return r?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading board members..."})]})}):c?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(je,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Board Members"}),(0,s.jsx)("p",{className:"text-gray-500",children:c})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Board Registry"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Manage board members, positions, and governance records"})]})]}),(0,s.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"Add Board Member"]})]}),(h||v)&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:h?"Add Board Member":"Edit Board Member"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(F.Pg,{label:"Full Name",value:j.name||"",onChange:e=>w("name",e.target.value),placeholder:"Enter full name",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Position",value:j.position||"",onChange:e=>w("position",e.target.value),placeholder:"e.g., Chairperson, Director, Secretary",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Appointed Date",type:"date",value:j.appointedDate?j.appointedDate.toISOString().split("T")[0]:"",onChange:e=>w("appointedDate",new Date(e.target.value)),className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Term End Date (Optional)",type:"date",value:j.termEnd?j.termEnd.toISOString().split("T")[0]:"",onChange:e=>w("termEnd",e.target.value?new Date(e.target.value):void 0),className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Email",type:"email",value:(null===(a=j.contact)||void 0===a?void 0:a.email)||"",onChange:e=>w("contact",{email:e.target.value}),placeholder:"Enter email address",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Phone (Optional)",value:(null===(i=j.contact)||void 0===i?void 0:i.phone)||"",onChange:e=>w("contact",{phone:e.target.value}),placeholder:"Enter phone number",className:"w-full"}),(0,s.jsx)(F.SB,{label:"Status",value:j.status||"active",onChange:e=>w("status",e.target.value),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],className:"w-full"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{f({name:"",position:"",appointedDate:new Date,termEnd:void 0,contact:{email:"",phone:""},status:"active"}),y(!1),b(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:h?async()=>{var e;if(j.name&&j.position&&j.appointedDate&&(null===(e=j.contact)||void 0===e?void 0:e.email))try{await p({name:j.name,position:j.position,appointedDate:j.appointedDate,termEnd:j.termEnd,contact:{email:j.contact.email,phone:j.contact.phone||""},status:j.status||"active"}),g&&await g.log("board_member_added",{memberName:j.name,position:j.position,appointedDate:j.appointedDate,email:j.contact.email,status:j.status||"active"}),f({name:"",position:"",appointedDate:new Date,termEnd:void 0,contact:{email:"",phone:""},status:"active"}),y(!1)}catch(c){}}:async()=>{var e;if(v&&j.name&&j.position&&j.appointedDate&&(null===(e=j.contact)||void 0===e?void 0:e.email))try{const e=N.find((e=>e.id===v));await x(v,{name:j.name,position:j.position,appointedDate:j.appointedDate,termEnd:j.termEnd,contact:{email:j.contact.email,phone:j.contact.phone||""},status:j.status||"active"}),g&&await g.log("board_member_updated",{memberName:j.name,oldPosition:null===e||void 0===e?void 0:e.position,newPosition:j.position,status:j.status||"active",updatedDate:new Date}),f({name:"",position:"",appointedDate:new Date,termEnd:void 0,contact:{email:"",phone:""},status:"active"}),b(null)}catch(c){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?"Add Member":"Update Member"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===N.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(u.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Board Members"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Start building your company's board of directors"}),(0,s.jsx)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add First Member"})]}):N.map((e=>{return(0,s.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[C(e.position)&&(0,s.jsx)(fe,{className:"h-5 w-5 text-yellow-500"}),(t=e.status,"active"===t?(0,s.jsx)(be.Z,{className:"h-5 w-5 text-green-500"}):(0,s.jsx)(je,{className:"h-5 w-5 text-gray-500"}))]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full border ".concat(D(e.status)),children:e.status}),C(e.position)&&(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Chairperson"})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.position}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Appointed: ",e.appointedDate.toLocaleDateString()]}),e.termEnd&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Term Ends: ",e.termEnd.toLocaleDateString()]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Ne.Z,{className:"h-4 w-4"}),e.contact.email]}),e.contact.phone&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ae.Z,{className:"h-4 w-4"}),e.contact.phone]})]})]})]}),(0,s.jsx)("button",{onClick:()=>(e=>{f(e),b(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit member",children:(0,s.jsx)(ee,{className:"h-4 w-4"})})]})},e.id);var t}))})]})})};var De=a(63795);const Ce=e=>{let{className:t}=e;var a,i,n,r;const{governance:c,loading:m,error:p,loadMeetingMinutes:x,addMeetingMinutes:g,updateMeetingMinutes:h}=oe(),{activityLogger:y}=U(""),[v,b]=(0,l.useState)(!1),[j,f]=(0,l.useState)(null),[N,w]=(0,l.useState)({title:"",date:new Date,attendees:[],agenda:[],decisions:[],actionItems:[],status:"draft"});(0,l.useEffect)((()=>{x()}),[x]);const D=(null===c||void 0===c?void 0:c.meetings)||[],E=(e,t)=>{w("attendees"===e||"agenda"===e||"decisions"===e||"actionItems"===e?a=>({...a,[e]:t}):a=>({...a,[e]:t}))},I=(e,t,a)=>{w((s=>{var l;return{...s,agenda:(null===(l=s.agenda)||void 0===l?void 0:l.map(((s,l)=>l===e?{...s,[t]:a}:s)))||[]}}))},S=(e,t,a)=>{w((s=>{var l;return{...s,decisions:(null===(l=s.decisions)||void 0===l?void 0:l.map(((s,l)=>l===e?{...s,[t]:a}:s)))||[]}}))},T=(e,t,a)=>{w((s=>{var l;return{...s,actionItems:(null===(l=s.actionItems)||void 0===l?void 0:l.map(((s,l)=>l===e?{...s,[t]:a}:s)))||[]}}))},P=e=>{switch(e){case"final":return(0,s.jsx)(k.Z,{className:"h-5 w-5 text-green-500"});case"draft":return(0,s.jsx)(ee,{className:"h-5 w-5 text-yellow-500"});case"pending":return(0,s.jsx)(A.Z,{className:"h-5 w-5 text-blue-500"});default:return(0,s.jsx)(C.Z,{className:"h-5 w-5 text-gray-500"})}},R=e=>{switch(e){case"final":return"bg-green-100 text-green-800 border-green-200";case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"pending":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return m?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading meeting minutes..."})]})}):p?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(ue.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Meeting Minutes"}),(0,s.jsx)("p",{className:"text-gray-500",children:p})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Meeting Minutes"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Record and manage board meeting minutes and decisions"})]})]}),(0,s.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"Add Meeting Minutes"]})]}),(v||j)&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:v?"Add Meeting Minutes":"Edit Meeting Minutes"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,s.jsx)(F.Pg,{label:"Meeting Title",value:N.title||"",onChange:e=>E("title",e.target.value),placeholder:"e.g., Board Meeting - Q1 2025",className:"w-full"}),(0,s.jsx)(F.Pg,{label:"Meeting Date",type:"date",value:N.date?N.date.toISOString().split("T")[0]:"",onChange:e=>E("date",new Date(e.target.value)),className:"w-full"}),(0,s.jsx)(F.SB,{label:"Status",value:N.status||"draft",onChange:e=>E("status",e.target.value),options:[{value:"draft",label:"Draft"},{value:"pending",label:"Pending Approval"},{value:"final",label:"Final"}],className:"w-full"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Attendees"}),(0,s.jsx)("button",{onClick:()=>{w((e=>({...e,attendees:[...e.attendees||[],""]})))},className:"text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"+ Add Attendee"})]}),(0,s.jsx)("div",{className:"space-y-2",children:null===(a=N.attendees)||void 0===a?void 0:a.map(((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(F.Pg,{value:e,onChange:e=>((e,t)=>{w((a=>{var s;return{...a,attendees:(null===(s=a.attendees)||void 0===s?void 0:s.map(((a,s)=>s===e?t:a)))||[]}}))})(t,e.target.value),placeholder:"Attendee name",className:"flex-1"}),(0,s.jsx)("button",{onClick:()=>(e=>{w((t=>{var a;return{...t,attendees:(null===(a=t.attendees)||void 0===a?void 0:a.filter(((t,a)=>a!==e)))||[]}}))})(t),className:"px-2 py-2 text-red-600 hover:bg-red-50 rounded-md",children:"\xd7"})]},t)))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Agenda Items"}),(0,s.jsx)("button",{onClick:()=>{w((e=>({...e,agenda:[...e.agenda||[],{item:"",discussion:"",status:"pending"}]})))},className:"text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"+ Add Item"})]}),(0,s.jsx)("div",{className:"space-y-3",children:null===(i=N.agenda)||void 0===i?void 0:i.map(((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-white rounded-md border",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)(F.Pg,{value:e.item,onChange:e=>I(t,"item",e.target.value),placeholder:"Agenda item",className:"flex-1 mr-2"}),(0,s.jsx)("button",{onClick:()=>(e=>{w((t=>{var a;return{...t,agenda:(null===(a=t.agenda)||void 0===a?void 0:a.filter(((t,a)=>a!==e)))||[]}}))})(t),className:"px-2 py-1 text-red-600 hover:bg-red-50 rounded-md",children:"\xd7"})]}),(0,s.jsx)(F.Pg,{value:e.discussion||"",onChange:e=>I(t,"discussion",e.target.value),placeholder:"Discussion notes",className:"w-full"})]},t)))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Decisions Made"}),(0,s.jsx)("button",{onClick:()=>{w((e=>({...e,decisions:[...e.decisions||[],{decision:"",rationale:""}]})))},className:"text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"+ Add Decision"})]}),(0,s.jsx)("div",{className:"space-y-3",children:null===(n=N.decisions)||void 0===n?void 0:n.map(((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-white rounded-md border",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)(F.Pg,{value:e.decision,onChange:e=>S(t,"decision",e.target.value),placeholder:"Decision made",className:"flex-1 mr-2"}),(0,s.jsx)("button",{onClick:()=>(e=>{w((t=>{var a;return{...t,decisions:(null===(a=t.decisions)||void 0===a?void 0:a.filter(((t,a)=>a!==e)))||[]}}))})(t),className:"px-2 py-1 text-red-600 hover:bg-red-50 rounded-md",children:"\xd7"})]}),(0,s.jsx)(F.Pg,{value:e.rationale||"",onChange:e=>S(t,"rationale",e.target.value),placeholder:"Rationale",className:"w-full"})]},t)))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Action Items"}),(0,s.jsx)("button",{onClick:()=>{w((e=>({...e,actionItems:[...e.actionItems||[],{item:"",assignee:"",dueDate:new Date,status:"pending"}]})))},className:"text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"+ Add Action Item"})]}),(0,s.jsx)("div",{className:"space-y-3",children:null===(r=N.actionItems)||void 0===r?void 0:r.map(((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-white rounded-md border",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-2",children:[(0,s.jsx)(F.Pg,{value:e.item,onChange:e=>T(t,"item",e.target.value),placeholder:"Action item",className:"w-full"}),(0,s.jsx)(F.Pg,{value:e.assignee||"",onChange:e=>T(t,"assignee",e.target.value),placeholder:"Assignee",className:"w-full"}),(0,s.jsx)(F.Pg,{type:"date",value:e.dueDate?e.dueDate.toISOString().split("T")[0]:"",onChange:e=>T(t,"dueDate",new Date(e.target.value)),className:"w-full"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(F.SB,{value:e.status||"pending",onChange:e=>T(t,"status",e.target.value),options:[{value:"pending",label:"Pending"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"}],className:"w-40"}),(0,s.jsx)("button",{onClick:()=>(e=>{w((t=>{var a;return{...t,actionItems:(null===(a=t.actionItems)||void 0===a?void 0:a.filter(((t,a)=>a!==e)))||[]}}))})(t),className:"px-2 py-1 text-red-600 hover:bg-red-50 rounded-md",children:"\xd7"})]})]},t)))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{w({title:"",date:new Date,attendees:[],agenda:[],decisions:[],actionItems:[],status:"draft"}),b(!1),f(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:v?async()=>{if(N.title&&N.date)try{var e,t,a,s;await g({title:N.title,date:N.date,attendees:N.attendees||[],agenda:N.agenda||[],decisions:N.decisions||[],actionItems:N.actionItems||[],status:N.status||"draft"}),await(null===y||void 0===y?void 0:y.log("meeting_minutes_recorded",{meetingTitle:N.title,meetingDate:N.date,attendeesCount:(null===(e=N.attendees)||void 0===e?void 0:e.length)||0,agendaItems:(null===(t=N.agenda)||void 0===t?void 0:t.length)||0,decisionsCount:(null===(a=N.decisions)||void 0===a?void 0:a.length)||0,actionItemsCount:(null===(s=N.actionItems)||void 0===s?void 0:s.length)||0,status:N.status||"draft"})),w({title:"",date:new Date,attendees:[],agenda:[],decisions:[],actionItems:[],status:"draft"}),b(!1)}catch(p){}}:async()=>{if(j&&N.title&&N.date)try{var e,t,a,s;await h(j,{title:N.title,date:N.date,attendees:N.attendees||[],agenda:N.agenda||[],decisions:N.decisions||[],actionItems:N.actionItems||[],status:N.status||"draft"}),await(null===y||void 0===y?void 0:y.log("meeting_minutes_updated",{meetingTitle:N.title,meetingDate:N.date,attendeesCount:(null===(e=N.attendees)||void 0===e?void 0:e.length)||0,agendaItems:(null===(t=N.agenda)||void 0===t?void 0:t.length)||0,decisionsCount:(null===(a=N.decisions)||void 0===a?void 0:a.length)||0,actionItemsCount:(null===(s=N.actionItems)||void 0===s?void 0:s.length)||0,status:N.status||"draft"})),w({title:"",date:new Date,attendees:[],agenda:[],decisions:[],actionItems:[],status:"draft"}),f(null)}catch(p){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:v?"Add Meeting Minutes":"Update Meeting Minutes"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===D.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(d.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Meeting Minutes"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Start recording your board meeting minutes and decisions"}),(0,s.jsx)("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add First Meeting"})]}):D.map((e=>(0,s.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:P(e.status)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full border ".concat(R(e.status)),children:e.status})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-500 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),e.date.toLocaleDateString()]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),e.attendees.length," attendees"]})]}),e.agenda.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Agenda Items"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.agenda.slice(0,3).map(((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,s.jsx)("span",{className:"flex-1",children:e.item})]},t))),e.agenda.length>3&&(0,s.jsxs)("li",{className:"text-gray-400",children:["... and ",e.agenda.length-3," more items"]})]})]}),e.decisions.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Key Decisions"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.decisions.slice(0,2).map(((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,s.jsx)("span",{className:"flex-1",children:e.decision})]},t))),e.decisions.length>2&&(0,s.jsxs)("li",{className:"text-gray-400",children:["... and ",e.decisions.length-2," more decisions"]})]})]}),e.actionItems.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Action Items"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.actionItems.slice(0,3).map(((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.item},t))),e.actionItems.length>3&&(0,s.jsxs)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:["+",e.actionItems.length-3," more"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>(e=>{w(e),f(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit meeting minutes",children:(0,s.jsx)(ee,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Download minutes",children:(0,s.jsx)(De.Z,{className:"h-4 w-4"})})]})]})},e.id)))})]})})};var Ee=a(51526),ke=a(76646),Ie=a(89934),Se=a(47782);class Ae{async getRoles(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/roles"));return(await(0,v.PL)(e)).docs.map((e=>{var t,a;const s=e.data();return{...s,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(a=s.updatedAt)||void 0===a?void 0:a.toDate())||new Date}}))}catch(e){throw e}}async createRole(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/roles")),a={...e,id:"role_".concat(Date.now()),createdAt:v.EK.now(),updatedAt:v.EK.now()};return await(0,v.ET)(t,a),{...e,id:a.id}}catch(t){throw t}}async updateRole(e,t){try{const a=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/roles")),s=(0,v.IO)(a,(0,v.ar)("id","==",e)),l=await(0,v.PL)(s);if(!l.empty){const e=l.docs[0];await(0,v.r7)(e.ref,{...t,updatedAt:v.EK.now()})}}catch(a){throw a}}async getEmployees(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/employees"));return(await(0,v.PL)(e)).docs.map((e=>{var t,a,s;const l=e.data();return{...l,startDate:(null===(t=l.startDate)||void 0===t?void 0:t.toDate())||new Date,createdAt:(null===(a=l.createdAt)||void 0===a?void 0:a.toDate())||new Date,updatedAt:(null===(s=l.updatedAt)||void 0===s?void 0:s.toDate())||new Date}}))}catch(e){throw e}}async createEmployee(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/employees"));return{id:(await(0,v.ET)(t,{...e,createdAt:v.EK.now(),updatedAt:v.EK.now()})).id,...e}}catch(t){throw t}}async updateEmployee(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/employees/").concat(e));await(0,v.r7)(a,{...t,updatedAt:v.EK.now()})}catch(a){throw a}}async getContracts(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/contracts"));return(await(0,v.PL)(e)).docs.map((e=>{var t,a,s,l,i;const n=e.data();return{...n,startDate:(null===(t=n.startDate)||void 0===t?void 0:t.toDate())||new Date,endDate:null===(a=n.endDate)||void 0===a?void 0:a.toDate(),signedAt:null===(s=n.signedAt)||void 0===s?void 0:s.toDate(),createdAt:(null===(l=n.createdAt)||void 0===l?void 0:l.toDate())||new Date,updatedAt:(null===(i=n.updatedAt)||void 0===i?void 0:i.toDate())||new Date}}))}catch(e){throw e}}async createContract(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/contracts"));return{id:(await(0,v.ET)(t,{...e,createdAt:v.EK.now(),updatedAt:v.EK.now()})).id,...e}}catch(t){throw t}}async updateContract(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/contracts/").concat(e));await(0,v.r7)(a,{...t,updatedAt:v.EK.now()})}catch(a){throw a}}async getPerformanceReviews(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/performance"));return(await(0,v.PL)(e)).docs.map((e=>{var t,a,s,l,i;const n=e.data();return{...n,reviewPeriod:{start:(null===(a=n.reviewPeriod)||void 0===a||null===(t=a.start)||void 0===t?void 0:t.toDate())||new Date,end:(null===(l=n.reviewPeriod)||void 0===l||null===(s=l.end)||void 0===s?void 0:s.toDate())||new Date},createdAt:(null===(i=n.createdAt)||void 0===i?void 0:i.toDate())||new Date}}))}catch(e){throw e}}async createPerformanceReview(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/performance"));return{id:(await(0,v.ET)(t,{...e,createdAt:v.EK.now()})).id,...e,createdAt:new Date}}catch(t){throw t}}async updatePerformanceReview(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/performance/").concat(e));await(0,v.r7)(a,{...t,updatedAt:v.EK.now()})}catch(a){throw a}}async getDevelopmentPlans(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/development"));return(await(0,v.PL)(e)).docs.map((e=>{var t,a,s,l,i,n;const r=e.data();return{...r,timeline:{start:(null===(a=r.timeline)||void 0===a||null===(t=a.start)||void 0===t?void 0:t.toDate())||new Date,end:(null===(l=r.timeline)||void 0===l||null===(s=l.end)||void 0===s?void 0:s.toDate())||new Date},activities:r.activities||[],createdAt:(null===(i=r.createdAt)||void 0===i?void 0:i.toDate())||new Date,updatedAt:(null===(n=r.updatedAt)||void 0===n?void 0:n.toDate())||new Date}}))}catch(e){throw e}}async createDevelopmentPlan(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/development"));return{id:(await(0,v.ET)(t,{...e,createdAt:v.EK.now(),updatedAt:v.EK.now()})).id,...e}}catch(t){throw t}}async updateDevelopmentPlan(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/development/").concat(e));await(0,v.r7)(a,{...t,updatedAt:v.EK.now()})}catch(a){throw a}}async getSkillsInventory(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/skills"));return(await(0,v.PL)(e)).docs.map((e=>{var t;const a=e.data();return{employeeId:e.id,skills:a.skills||[],certifications:a.certifications||[],updatedAt:(null===(t=a.updatedAt)||void 0===t?void 0:t.toDate())||new Date}}))}catch(e){throw e}}async updateSkillsInventory(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/skills/").concat(e));await(0,v.pl)(a,{...t,updatedAt:v.EK.now()},{merge:!0})}catch(a){throw a}}constructor(e){this.companyId=e}}const Te=()=>{var e;const{state:t,dispatch:a}=w(),[s,i]=(0,l.useState)(null);(0,l.useEffect)((()=>{var e;(null===(e=t.company)||void 0===e?void 0:e.id)&&!s&&i(new Ae(t.company.id))}),[null===(e=t.company)||void 0===e?void 0:e.id,s]);const n=(0,l.useCallback)((async e=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0});const l=await s.createRole(e),i=[...t.humanCapital.roles,l];return a({type:"UPDATE_HUMAN_CAPITAL",data:{roles:i}}),l.id}catch(l){throw a({type:"SET_ERROR",error:"Failed to create role"}),l}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.roles,a]),r=(0,l.useCallback)((async(e,l)=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0}),await s.updateRole(e,l);const i=t.humanCapital.roles.map((t=>t.id===e?{...t,...l}:t));a({type:"UPDATE_HUMAN_CAPITAL",data:{roles:i}})}catch(i){throw a({type:"SET_ERROR",error:"Failed to update role"}),i}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.roles,a]),o=(0,l.useCallback)((async e=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0});const l=await s.createEmployee(e),i=[...t.humanCapital.employees,l];return a({type:"UPDATE_HUMAN_CAPITAL",data:{employees:i}}),l.id}catch(l){throw a({type:"SET_ERROR",error:"Failed to create employee"}),l}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.employees,a]),c=(0,l.useCallback)((async(e,l)=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0}),await s.updateEmployee(e,l);const i=t.humanCapital.employees.map((t=>t.id===e?{...t,...l}:t));a({type:"UPDATE_HUMAN_CAPITAL",data:{employees:i}})}catch(i){throw a({type:"SET_ERROR",error:"Failed to update employee"}),i}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.employees,a]),d=(0,l.useCallback)((async e=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0});const l=await s.createContract(e),i=[...t.humanCapital.contracts,l];return a({type:"UPDATE_HUMAN_CAPITAL",data:{contracts:i}}),l.id}catch(l){throw a({type:"SET_ERROR",error:"Failed to create contract"}),l}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.contracts,a]),m=(0,l.useCallback)((async(e,l)=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0}),await s.updateContract(e,l);const i=t.humanCapital.contracts.map((t=>t.id===e?{...t,...l}:t));a({type:"UPDATE_HUMAN_CAPITAL",data:{contracts:i}})}catch(i){throw a({type:"SET_ERROR",error:"Failed to update contract"}),i}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.contracts,a]),u=(0,l.useCallback)((async e=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0});const l=await s.createPerformanceReview(e),i=[...t.humanCapital.performance,l];return a({type:"UPDATE_HUMAN_CAPITAL",data:{performance:i}}),l.id}catch(l){throw a({type:"SET_ERROR",error:"Failed to create performance review"}),l}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.performance,a]),p=(0,l.useCallback)((async(e,l)=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0}),await s.updatePerformanceReview(e,l);const i=t.humanCapital.performance.map((t=>t.id===e?{...t,...l}:t));a({type:"UPDATE_HUMAN_CAPITAL",data:{performance:i}})}catch(i){throw a({type:"SET_ERROR",error:"Failed to update performance review"}),i}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.performance,a]),x=(0,l.useCallback)((async e=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0});const l=await s.createDevelopmentPlan(e),i=[...t.humanCapital.development,l];return a({type:"UPDATE_HUMAN_CAPITAL",data:{development:i}}),l.id}catch(l){throw a({type:"SET_ERROR",error:"Failed to create development plan"}),l}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.development,a]),g=(0,l.useCallback)((async(e,l)=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0}),await s.updateDevelopmentPlan(e,l);const i=t.humanCapital.development.map((t=>t.id===e?{...t,...l}:t));a({type:"UPDATE_HUMAN_CAPITAL",data:{development:i}})}catch(i){throw a({type:"SET_ERROR",error:"Failed to update development plan"}),i}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.development,a]),h=(0,l.useCallback)((async(e,l)=>{if(s)try{a({type:"SET_LOADING",module:"humanCapital",loading:!0}),await s.updateSkillsInventory(e,l);const i=t.humanCapital.skills.map((t=>t.employeeId===e?l:t));i.find((t=>t.employeeId===e))||i.push(l),a({type:"UPDATE_HUMAN_CAPITAL",data:{skills:i}})}catch(i){throw a({type:"SET_ERROR",error:"Failed to update skill inventory"}),i}finally{a({type:"SET_LOADING",module:"humanCapital",loading:!1})}}),[s,t.humanCapital.skills,a]);return{roles:t.humanCapital.roles,employees:t.humanCapital.employees,contracts:t.humanCapital.contracts,performance:t.humanCapital.performance,development:t.humanCapital.development,skills:t.humanCapital.skills,loading:t.loading.humanCapital,error:t.error,createRole:n,updateRole:r,createEmployee:o,updateEmployee:c,createContract:d,updateContract:m,createPerformanceReview:u,updatePerformanceReview:p,createDevelopmentPlan:x,updateDevelopmentPlan:g,updateSkillInventory:h}},Pe=e=>{let{className:t=""}=e;const{roles:a,employees:i,loading:n,createEmployee:r,updateEmployee:c}=Te(),{activityLogger:d}=U(""),[m,x]=(0,l.useState)(new Set),[g,h]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),[b,j]=(0,l.useState)({userId:"",roleId:"",department:"",startDate:new Date,employmentType:"full-time",salary:0,currency:"ZAR",status:"active"}),f=(0,l.useMemo)((()=>{const e=new Map(a.map((e=>[e.id,e]))),t=(new Map(i.map((e=>[e.id,e]))),function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i.filter((e=>e.managerId===a)).map((a=>{const l=e.get(a.roleId);return l?{employee:a,role:l,subordinates:t(a.id,s+1),level:s}:null})).filter((e=>null!==e))});return t()}),[i,a]),N=(0,l.useCallback)((e=>{x((t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}))}),[]),w=(0,l.useCallback)((async()=>{try{await r(b),await(null===d||void 0===d?void 0:d.log("org_structure_updated",{action:"employee_added",department:b.department,employmentType:b.employmentType,roleId:b.roleId,status:b.status})),v(!1),j({userId:"",roleId:"",department:"",startDate:new Date,employmentType:"full-time",salary:0,currency:"ZAR",status:"active"})}catch(e){}}),[r,b,d]),D=e=>{switch(e){case 0:return(0,s.jsx)(fe,{className:"w-4 h-4 text-yellow-500"});case 1:return(0,s.jsx)(me.Z,{className:"w-4 h-4 text-blue-500"});default:return(0,s.jsx)(E.Z,{className:"w-4 h-4 text-gray-500"})}},C=e=>{const{employee:t,role:a,subordinates:l,level:i}=e,n=m.has(t.id),r=l.length>0;return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"\n            relative bg-white border-2 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\n            min-w-[200px] max-w-[280px]\n            ".concat((null===g||void 0===g?void 0:g.id)===t.id?"border-blue-500 bg-blue-50":"border-gray-200","\n            ").concat(0===i?"border-t-4 border-t-yellow-500":"","\n          "),onClick:()=>h(t),children:[(0,s.jsx)("div",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 border-2 border-gray-200",children:D(i)}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(q.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 truncate",children:[t.userId," "]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate",children:a.title})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:a.department}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===t.status?"bg-green-100 text-green-800":"inactive"===t.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.status})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:t.employmentType}),(0,s.jsxs)("span",{children:[t.currency," ",t.salary.toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-gray-100",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors","aria-label":"Edit employee",children:(0,s.jsx)(ke.Z,{className:"w-4 h-4"})}),r&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),N(t.id)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors","aria-label":n?"Collapse subordinates":"Expand subordinates",children:n?(0,s.jsx)(Ie.Z,{className:"w-4 h-4"}):(0,s.jsx)(Se.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),v(!0)},className:"p-1 text-gray-400 hover:text-green-600 transition-colors","aria-label":"Add subordinate",children:(0,s.jsx)(le.Z,{className:"w-4 h-4"})})]})]}),r&&n&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-8",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"w-px h-8 bg-gray-300"})}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-8",children:l.map((e=>C(e)))})]})]},t.id)};return n?(0,s.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading organization chart..."})]}):(0,s.jsxs)("div",{className:"w-full ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Organization Chart"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(le.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add Employee"})]}),(0,s.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Settings"})]})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-8 min-h-[600px]",children:0===f.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[(0,s.jsx)(u.Z,{className:"w-16 h-16 mb-4 opacity-50"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Organization Structure"}),(0,s.jsx)("p",{className:"text-center mb-4",children:"Start building your organization by adding employees and defining their roles."}),(0,s.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(le.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add First Employee"})]})]}):(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-8",children:f.map((e=>C(e)))})})}),(0,s.jsx)(Ee.M,{children:y&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>v(!1),children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Employee"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(F.Pg,{label:"User ID",value:b.userId,onChange:e=>j((t=>({...t,userId:e.target.value}))),placeholder:"Enter user ID"}),(0,s.jsx)(F.SB,{label:"Role",value:b.roleId,onChange:e=>j((t=>({...t,roleId:e.target.value}))),options:a.map((e=>({value:e.id,label:e.title})))}),(0,s.jsx)(F.Pg,{label:"Department",value:b.department,onChange:e=>j((t=>({...t,department:e.target.value}))),placeholder:"Enter department"}),(0,s.jsx)(F.SB,{label:"Employment Type",value:b.employmentType,onChange:e=>j((t=>({...t,employmentType:e}))),options:[{value:"full-time",label:"Full Time"},{value:"part-time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"intern",label:"Intern"}]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Salary",type:"number",value:b.salary.toString(),onChange:e=>j((t=>({...t,salary:parseFloat(e.target.value)||0}))),placeholder:"0"}),(0,s.jsx)(F.SB,{label:"Currency",value:b.currency,onChange:e=>j((t=>({...t,currency:e.target.value}))),options:[{value:"ZAR",label:"ZAR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"}]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:w,disabled:!b.userId||!b.roleId,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Employee"})]})]})})})]})};var Re=a(41036);const _e=e=>{let{className:t}=e;var a,i,n,r;const{humanCapital:c,loading:d,error:m,loadRoles:p,createRole:x,updateRole:g,deleteRole:h}=Te(),{activityLogger:y}=U(""),v=(null===c||void 0===c?void 0:c.roles)||[],[b,j]=(0,l.useState)(!1),[f,N]=(0,l.useState)(null),[w,D]=(0,l.useState)({title:"",description:"",department:"",level:"entry",salaryRange:{min:0,max:0,currency:"ZAR"},responsibilities:[],requirements:[],permissions:[],status:"active"});(0,l.useEffect)((()=>{p()}),[p]);const C=(e,t)=>{D((a=>({...a,[e]:t})))},k=()=>{D({title:"",description:"",department:"",level:"entry",salaryRange:{min:0,max:0,currency:"ZAR"},responsibilities:[],requirements:[],permissions:[],status:"active"})};return d?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading roles..."})]})}):m?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(de.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Roles"}),(0,s.jsx)("p",{className:"text-gray-500",children:m})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(E.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Role Definitions"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Define organizational roles, responsibilities, and requirements"})]})]}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"Add Role"]})]}),(0,s.jsx)(Ee.M,{children:(b||f)&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:b?"Add New Role":"Edit Role"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Role Title",value:w.title||"",onChange:e=>C("title",e.target.value),placeholder:"e.g., Senior Software Engineer",className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Department",value:w.department||"",onChange:e=>C("department",e.target.value),options:[{value:"engineering",label:"Engineering"},{value:"design",label:"Design"},{value:"product",label:"Product"},{value:"marketing",label:"Marketing"},{value:"sales",label:"Sales"},{value:"hr",label:"Human Resources"},{value:"finance",label:"Finance"},{value:"operations",label:"Operations"},{value:"executive",label:"Executive"}],className:"w-full"})})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(F.Pg,{label:"Description",value:w.description||"",onChange:e=>C("description",e.target.value),placeholder:"Detailed description of the role and its purpose",className:"w-full"})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Level",value:w.level||"entry",onChange:e=>C("level",e.target.value),options:[{value:"entry",label:"Entry Level"},{value:"junior",label:"Junior"},{value:"mid",label:"Mid Level"},{value:"senior",label:"Senior"},{value:"lead",label:"Lead"},{value:"principal",label:"Principal"},{value:"executive",label:"Executive"}],className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Min Salary",type:"number",value:(null===(i=w.salaryRange)||void 0===i||null===(a=i.min)||void 0===a?void 0:a.toString())||"",onChange:e=>C("salaryRange",{...w.salaryRange,min:parseFloat(e.target.value)||0}),placeholder:"0",className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Max Salary",type:"number",value:(null===(r=w.salaryRange)||void 0===r||null===(n=r.max)||void 0===n?void 0:n.toString())||"",onChange:e=>C("salaryRange",{...w.salaryRange,max:parseFloat(e.target.value)||0}),placeholder:"0",className:"w-full"})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{k(),j(!1),N(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:b?async()=>{if(w.title&&w.description&&w.department)try{var e,t;await x({title:w.title,description:w.description,department:w.department,level:w.level||"entry",salaryRange:w.salaryRange||{min:0,max:0,currency:"ZAR"},responsibilities:w.responsibilities||[],requirements:w.requirements||[],permissions:w.permissions||[],status:w.status||"active"}),await(null===y||void 0===y?void 0:y.log("role_created",{roleTitle:w.title,department:w.department,level:w.level||"entry",salaryMin:(null===(e=w.salaryRange)||void 0===e?void 0:e.min)||0,salaryMax:(null===(t=w.salaryRange)||void 0===t?void 0:t.max)||0,status:w.status||"active"})),k(),j(!1)}catch(m){}}:async()=>{if(f&&w.title&&w.description&&w.department)try{var e,t;await g(f,{title:w.title,description:w.description,department:w.department,level:w.level||"entry",salaryRange:w.salaryRange||{min:0,max:0,currency:"ZAR"},responsibilities:w.responsibilities||[],requirements:w.requirements||[],permissions:w.permissions||[],status:w.status||"active"}),await(null===y||void 0===y?void 0:y.log("role_updated",{roleTitle:w.title,department:w.department,level:w.level||"entry",salaryMin:(null===(e=w.salaryRange)||void 0===e?void 0:e.min)||0,salaryMax:(null===(t=w.salaryRange)||void 0===t?void 0:t.max)||0,status:w.status||"active"})),k(),N(null)}catch(m){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:b?"Add Role":"Update Role"})]})]})})}),(0,s.jsx)("div",{className:"space-y-4",children:0===v.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(E.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Roles Defined"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Start building your organizational structure by defining roles"}),(0,s.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add First Role"})]}):v.map((e=>{var t,a;return(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(E.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("executive"===e.level?"bg-purple-100 text-purple-800":"senior"===e.level?"bg-blue-100 text-blue-800":"mid"===e.level?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.level}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),e.department]}),e.salaryRange&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Re.Z,{className:"h-4 w-4"}),e.salaryRange.currency," ",null===(t=e.salaryRange.min)||void 0===t?void 0:t.toLocaleString()," - ",null===(a=e.salaryRange.max)||void 0===a?void 0:a.toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>(e=>{D(e),N(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit role",children:(0,s.jsx)(ee,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this role? This action cannot be undone."))try{await h(e)}catch(m){}})(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete role",children:(0,s.jsx)(se.Z,{className:"h-4 w-4"})})]})]})},e.id)}))})]})})};var Ze=a(40594);const Le=e=>{let{className:t}=e;const{humanCapital:a,loading:i,error:n,loadContracts:r,createContract:c,updateContract:d,deleteContract:m}=Te(),{activityLogger:u}=U(""),p=(null===a||void 0===a?void 0:a.contracts)||[],[x,g]=(0,l.useState)(!1),[h,y]=(0,l.useState)(null),[v,b]=(0,l.useState)(null),[j,f]=(0,l.useState)({title:"",type:"employment",employeeId:"",templateId:"",content:"",status:"draft",startDate:new Date,endDate:new Date,signatures:[],attachments:[]});(0,l.useEffect)((()=>{r()}),[r]);const N=(e,t)=>{f((a=>({...a,[e]:t})))},w=()=>{f({title:"",type:"employment",employeeId:"",templateId:"",content:"",status:"draft",startDate:new Date,endDate:new Date,signatures:[],attachments:[]})},D=()=>{w(),g(!1),y(null),b(null)},C=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"pending_signature":return"bg-yellow-100 text-yellow-800";case"signed":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800"}},E=e=>{switch(e){case"draft":return(0,s.jsx)(ee,{className:"h-4 w-4"});case"pending_signature":return(0,s.jsx)(A.Z,{className:"h-4 w-4"});case"signed":return(0,s.jsx)(k.Z,{className:"h-4 w-4"});case"expired":return(0,s.jsx)(de.Z,{className:"h-4 w-4"});default:return(0,s.jsx)(ue.Z,{className:"h-4 w-4"})}};return i?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading contracts..."})]})}):n?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(de.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Contracts"}),(0,s.jsx)("p",{className:"text-gray-500",children:n})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ue.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Contract Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Create, manage, and track employment contracts with e-signature integration"})]})]}),(0,s.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"New Contract"]})]}),(0,s.jsx)(Ee.M,{children:(x||h)&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:x?"Create New Contract":"Edit Contract"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Contract Title",value:j.title||"",onChange:e=>N("title",e.target.value),placeholder:"e.g., Employment Contract - John Doe",className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Contract Type",value:j.type||"employment",onChange:e=>N("type",e.target.value),options:[{value:"employment",label:"Employment Contract"},{value:"consulting",label:"Consulting Agreement"},{value:"nda",label:"Non-Disclosure Agreement"},{value:"contractor",label:"Independent Contractor"},{value:"internship",label:"Internship Agreement"},{value:"probation",label:"Probation Agreement"}],className:"w-full"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Employee ID",value:j.employeeId||"",onChange:e=>N("employeeId",e.target.value),placeholder:"Employee identifier",className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Status",value:j.status||"draft",onChange:e=>N("status",e.target.value),options:[{value:"draft",label:"Draft"},{value:"pending_signature",label:"Pending Signature"},{value:"signed",label:"Signed"},{value:"expired",label:"Expired"}],className:"w-full"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Start Date",type:"date",value:j.startDate?j.startDate.toISOString().split("T")[0]:"",onChange:e=>N("startDate",new Date(e.target.value)),className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"End Date",type:"date",value:j.endDate?j.endDate.toISOString().split("T")[0]:"",onChange:e=>N("endDate",new Date(e.target.value)),className:"w-full"})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contract Content"}),(0,s.jsx)("textarea",{value:j.content||"",onChange:e=>N("content",e.target.value),rows:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter contract content or use a template..."})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:D,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:x?async()=>{if(j.title&&j.employeeId&&j.content)try{await c({title:j.title,type:j.type||"employment",employeeId:j.employeeId,templateId:j.templateId||"",content:j.content,status:j.status||"draft",startDate:j.startDate||new Date,endDate:j.endDate||new Date,signatures:j.signatures||[],attachments:j.attachments||[]}),await(null===u||void 0===u?void 0:u.log("contract_created",{contractTitle:j.title,contractType:j.type||"employment",employeeId:j.employeeId,status:j.status||"draft",startDate:j.startDate,endDate:j.endDate})),w(),g(!1)}catch(n){}}:async()=>{if(h&&j.title&&j.employeeId&&j.content)try{await d(h,{title:j.title,type:j.type||"employment",employeeId:j.employeeId,templateId:j.templateId||"",content:j.content,status:j.status||"draft",startDate:j.startDate||new Date,endDate:j.endDate||new Date,signatures:j.signatures||[],attachments:j.attachments||[]}),"signed"===j.status&&await(null===u||void 0===u?void 0:u.log("contract_signed",{contractTitle:j.title,contractType:j.type||"employment",employeeId:j.employeeId,signedDate:new Date,endDate:j.endDate})),w(),y(null)}catch(n){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:x?"Create Contract":"Update Contract"})]})]})})}),(0,s.jsx)(Ee.M,{children:v&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Contract Details"}),(0,s.jsx)("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(()=>{const e=p.find((e=>e.id===v));return e?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,s.jsx)("p",{className:"text-gray-900",children:e.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,s.jsx)("p",{className:"text-gray-900",children:e.type})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,s.jsx)("div",{className:"border border-gray-300 rounded-md p-4 max-h-96 overflow-y-auto whitespace-pre-wrap",children:e.content})]})]}):null})()]})})}),(0,s.jsx)("div",{className:"space-y-4",children:0===p.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(ue.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Contracts"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Start managing employment contracts and agreements"}),(0,s.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create First Contract"})]}):p.map((e=>{var t;return(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(ue.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full flex items-center gap-1 ".concat(C(e.status)),children:[E(e.status),e.status.replace("_"," ")]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-2",children:[(0,s.jsxs)("span",{children:["Type: ",e.type]}),(0,s.jsxs)("span",{children:["Employee: ",e.employeeId]}),e.startDate&&(0,s.jsxs)("span",{children:["Start: ",e.startDate.toLocaleDateString()]}),e.endDate&&(0,s.jsxs)("span",{children:["End: ",e.endDate.toLocaleDateString()]})]}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm line-clamp-2",children:[null===(t=e.content)||void 0===t?void 0:t.substring(0,200),"..."]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>b(e.id),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"View contract",children:(0,s.jsx)(ye.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(e=>{f(e),y(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit contract",children:(0,s.jsx)(ee,{className:"h-4 w-4"})}),"draft"===e.status&&(0,s.jsx)("button",{onClick:()=>(async e=>{alert("E-signature functionality would be integrated here with services like DocuSign or HelloSign")})(e.id),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"Send for signature",children:(0,s.jsx)(Ze.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this contract? This action cannot be undone."))try{await m(e)}catch(n){}})(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete contract",children:(0,s.jsx)(se.Z,{className:"h-4 w-4"})})]})]})},e.id)}))})]})})};var Oe=a(11773);const Me=e=>{let{className:t}=e;var a,i;const{humanCapital:n,loading:r,error:m,loadPerformanceReviews:u,createPerformanceReview:p,updatePerformanceReview:x,deletePerformanceReview:g}=Te(),{activityLogger:h}=U(""),y=(null===n||void 0===n?void 0:n.performance)||[],[v,b]=(0,l.useState)(!1),[j,f]=(0,l.useState)(null),[N,w]=(0,l.useState)({employeeId:"",reviewerId:"",reviewPeriod:{start:new Date,end:new Date},overallRating:3,categories:[],goals:[],feedback:"",developmentPlan:"",status:"draft",reviewType:"annual"});(0,l.useEffect)((()=>{u()}),[u]);const D=(e,t)=>{w((a=>({...a,[e]:t})))},C=()=>{w({employeeId:"",reviewerId:"",reviewPeriod:{start:new Date,end:new Date},overallRating:3,categories:[],goals:[],feedback:"",developmentPlan:"",status:"draft",reviewType:"annual"})},E=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800"}},I=e=>{switch(e){case"draft":return(0,s.jsx)(ee,{className:"h-4 w-4"});case"in_progress":return(0,s.jsx)(A.Z,{className:"h-4 w-4"});case"completed":return(0,s.jsx)(k.Z,{className:"h-4 w-4"});case"cancelled":return(0,s.jsx)(de.Z,{className:"h-4 w-4"});default:return(0,s.jsx)(c.Z,{className:"h-4 w-4"})}},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;return(0,s.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map((l=>(0,s.jsx)("button",{type:"button",disabled:!t,onClick:()=>t&&a&&a(l),className:"".concat(t?"cursor-pointer hover:scale-110":"cursor-default"," transition-transform"),children:(0,s.jsx)(Oe.Z,{className:"h-5 w-5 ".concat(l<=e?"text-yellow-400 fill-current":"text-gray-300")})},l)))})};return r?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading performance reviews..."})]})}):m?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(de.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Performance Reviews"}),(0,s.jsx)("p",{className:"text-gray-500",children:m})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Performance Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Conduct performance reviews, track goals, and manage employee development"})]})]}),(0,s.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"New Review"]})]}),(0,s.jsx)(Ee.M,{children:(v||j)&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:v?"Create Performance Review":"Edit Performance Review"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Employee ID",value:N.employeeId||"",onChange:e=>D("employeeId",e.target.value),placeholder:"Employee identifier",className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Reviewer ID",value:N.reviewerId||"",onChange:e=>D("reviewerId",e.target.value),placeholder:"Reviewer identifier",className:"w-full"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Review Type",value:N.reviewType||"annual",onChange:e=>D("reviewType",e.target.value),options:[{value:"annual",label:"Annual Review"},{value:"mid_year",label:"Mid-Year Review"},{value:"probation",label:"Probation Review"},{value:"project",label:"Project Review"},{value:"ad_hoc",label:"Ad-hoc Review"}],className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Status",value:N.status||"draft",onChange:e=>D("status",e.target.value),options:[{value:"draft",label:"Draft"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],className:"w-full"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overall Rating"}),S(N.overallRating||3,!0,(e=>D("overallRating",e)))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Review Period Start",type:"date",value:(null===(a=N.reviewPeriod)||void 0===a?void 0:a.start)?N.reviewPeriod.start.toISOString().split("T")[0]:"",onChange:e=>D("reviewPeriod",{...N.reviewPeriod,start:new Date(e.target.value)}),className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Review Period End",type:"date",value:(null===(i=N.reviewPeriod)||void 0===i?void 0:i.end)?N.reviewPeriod.end.toISOString().split("T")[0]:"",onChange:e=>D("reviewPeriod",{...N.reviewPeriod,end:new Date(e.target.value)}),className:"w-full"})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Performance Feedback"}),(0,s.jsx)("textarea",{value:N.feedback||"",onChange:e=>D("feedback",e.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Provide detailed feedback on performance, achievements, and areas for improvement..."})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Development Plan"}),(0,s.jsx)("textarea",{value:N.developmentPlan||"",onChange:e=>D("developmentPlan",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Outline development goals, training needs, and next steps..."})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{C(),b(!1),f(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:v?async()=>{if(N.employeeId&&N.reviewerId&&N.feedback)try{var e,t;await p({employeeId:N.employeeId,reviewerId:N.reviewerId,reviewPeriod:N.reviewPeriod||{start:new Date,end:new Date},overallRating:N.overallRating||3,categories:N.categories||[],goals:N.goals||[],feedback:N.feedback,developmentPlan:N.developmentPlan||"",status:N.status||"draft",reviewType:N.reviewType||"annual"}),await(null===h||void 0===h?void 0:h.log("performance_review_submitted",{employeeId:N.employeeId,reviewerId:N.reviewerId,overallRating:N.overallRating||3,reviewType:N.reviewType||"annual",status:N.status||"draft",reviewPeriodStart:null===(e=N.reviewPeriod)||void 0===e?void 0:e.start,reviewPeriodEnd:null===(t=N.reviewPeriod)||void 0===t?void 0:t.end})),C(),b(!1)}catch(m){}}:async()=>{if(j&&N.employeeId&&N.reviewerId&&N.feedback)try{await x(j,{employeeId:N.employeeId,reviewerId:N.reviewerId,reviewPeriod:N.reviewPeriod||{start:new Date,end:new Date},overallRating:N.overallRating||3,categories:N.categories||[],goals:N.goals||[],feedback:N.feedback,developmentPlan:N.developmentPlan||"",status:N.status||"draft",reviewType:N.reviewType||"annual"}),C(),f(null)}catch(m){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:v?"Create Review":"Update Review"})]})]})})}),(0,s.jsx)("div",{className:"space-y-4",children:0===y.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Performance Reviews"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Start conducting performance reviews and tracking employee development"}),(0,s.jsx)("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create First Review"})]}):y.map((e=>(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Review for Employee ",e.employeeId]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Reviewed by ",e.reviewerId," \u2022 ",e.reviewType," Review"]})]}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full flex items-center gap-1 ".concat(E(e.status)),children:[I(e.status),e.status.replace("_"," ")]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[S(e.overallRating),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),e.reviewPeriod.start.toLocaleDateString()," - ",e.reviewPeriod.end.toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Feedback:"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2",children:e.feedback})]}),e.developmentPlan&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Development Plan:"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2",children:e.developmentPlan})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>(e=>{w(e),f(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit review",children:(0,s.jsx)(ee,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this performance review? This action cannot be undone."))try{await g(e)}catch(m){}})(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete review",children:(0,s.jsx)(se.Z,{className:"h-4 w-4"})})]})]})},e.id)))})]})})};var Ue=a(80374),Fe=a(99737);const Be=e=>{let{className:t}=e;var a,i,n;const{humanCapital:r,loading:c,error:m,loadDevelopmentPlans:u,createDevelopmentPlan:p,updateDevelopmentPlan:g,deleteDevelopmentPlan:h}=Te(),{activityLogger:y}=U(""),v=(null===r||void 0===r?void 0:r.development)||[],[b,j]=(0,l.useState)(!1),[f,N]=(0,l.useState)(null),[w,C]=(0,l.useState)({employeeId:"",title:"",description:"",objectives:[],courses:[],certifications:[],startDate:new Date,targetCompletionDate:new Date,status:"planned",progress:0,academyLinks:[]});(0,l.useEffect)((()=>{u()}),[u]);const E=(e,t)=>{C((a=>({...a,[e]:t})))},I=()=>{C({employeeId:"",title:"",description:"",objectives:[],courses:[],certifications:[],startDate:new Date,targetCompletionDate:new Date,status:"planned",progress:0,academyLinks:[]})},S=e=>{switch(e){case"planned":default:return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"on_hold":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800"}},T=e=>{switch(e){case"planned":return(0,s.jsx)(d.Z,{className:"h-4 w-4"});case"in_progress":return(0,s.jsx)(A.Z,{className:"h-4 w-4"});case"completed":return(0,s.jsx)(k.Z,{className:"h-4 w-4"});case"on_hold":case"cancelled":return(0,s.jsx)(de.Z,{className:"h-4 w-4"});default:return(0,s.jsx)(Ue.Z,{className:"h-4 w-4"})}};return c?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading development plans..."})]})}):m?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow p-6 ".concat(t),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(de.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Development Plans"}),(0,s.jsx)("p",{className:"text-gray-500",children:m})]})}):(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow ".concat(t),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(Ue.Z,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Development Plans"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Create personalized learning paths linked to Sazi Life Academy"})]})]}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-4 w-4"}),"New Plan"]})]}),(0,s.jsx)(Ee.M,{children:(b||f)&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:b?"Create Development Plan":"Edit Development Plan"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Employee ID",value:w.employeeId||"",onChange:e=>E("employeeId",e.target.value),placeholder:"Employee identifier",className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Plan Title",value:w.title||"",onChange:e=>E("title",e.target.value),placeholder:"e.g., Leadership Development Program",className:"w-full"})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:w.description||"",onChange:e=>E("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the development goals and objectives..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F.SB,{label:"Status",value:w.status||"planned",onChange:e=>E("status",e.target.value),options:[{value:"planned",label:"Planned"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"cancelled",label:"Cancelled"}],className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Start Date",type:"date",value:w.startDate?w.startDate.toISOString().split("T")[0]:"",onChange:e=>E("startDate",new Date(e.target.value)),className:"w-full"})}),(0,s.jsx)("div",{children:(0,s.jsx)(F.Pg,{label:"Target Completion",type:"date",value:w.targetCompletionDate?w.targetCompletionDate.toISOString().split("T")[0]:"",onChange:e=>E("targetCompletionDate",new Date(e.target.value)),className:"w-full"})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Progress (",w.progress||0,"%)"]}),(0,s.jsx)("input",{type:"range",min:"0",max:"100",value:w.progress||0,onChange:e=>E("progress",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Courses"}),(0,s.jsx)("textarea",{value:(null===(a=w.courses)||void 0===a?void 0:a.join("\n"))||"",onChange:e=>E("courses",e.target.value.split("\n").filter((e=>e.trim()))),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"List required courses (one per line)..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Certifications"}),(0,s.jsx)("textarea",{value:(null===(i=w.certifications)||void 0===i?void 0:i.join("\n"))||"",onChange:e=>E("certifications",e.target.value.split("\n").filter((e=>e.trim()))),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"List target certifications (one per line)..."})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sazi Life Academy Links"}),(0,s.jsx)("textarea",{value:(null===(n=w.academyLinks)||void 0===n?void 0:n.join("\n"))||"",onChange:e=>E("academyLinks",e.target.value.split("\n").filter((e=>e.trim()))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add links to relevant Sazi Life Academy courses (one per line)..."})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{I(),j(!1),N(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{onClick:b?async()=>{if(w.employeeId&&w.title&&w.description)try{var e,t,a;await p({employeeId:w.employeeId,title:w.title,description:w.description,objectives:w.objectives||[],courses:w.courses||[],certifications:w.certifications||[],startDate:w.startDate||new Date,targetCompletionDate:w.targetCompletionDate||new Date,status:w.status||"planned",progress:w.progress||0,academyLinks:w.academyLinks||[]}),await(null===y||void 0===y?void 0:y.log("development_plan_created",{employeeId:w.employeeId,planTitle:w.title,objectivesCount:(null===(e=w.objectives)||void 0===e?void 0:e.length)||0,coursesCount:(null===(t=w.courses)||void 0===t?void 0:t.length)||0,certificationsCount:(null===(a=w.certifications)||void 0===a?void 0:a.length)||0,startDate:w.startDate,targetCompletionDate:w.targetCompletionDate,status:w.status||"planned"})),I(),j(!1)}catch(m){}}:async()=>{if(f&&w.employeeId&&w.title&&w.description)try{await g(f,{employeeId:w.employeeId,title:w.title,description:w.description,objectives:w.objectives||[],courses:w.courses||[],certifications:w.certifications||[],startDate:w.startDate||new Date,targetCompletionDate:w.targetCompletionDate||new Date,status:w.status||"planned",progress:w.progress||0,academyLinks:w.academyLinks||[]}),I(),N(null)}catch(m){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:b?"Create Plan":"Update Plan"})]})]})})}),(0,s.jsx)("div",{className:"space-y-4",children:0===v.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(Ue.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Development Plans"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Create personalized development plans linked to Sazi Life Academy courses"}),(0,s.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create First Plan"})]}):v.map((e=>{return(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(Ue.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Employee: ",e.employeeId]})]}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full flex items-center gap-1 ".concat(S(e.status)),children:[T(e.status),e.status.replace("_"," ")]})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[(0,s.jsx)("span",{children:"Progress"}),(0,s.jsxs)("span",{children:[e.progress,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat((t=e.progress,t>=80?"bg-green-500":t>=60?"bg-blue-500":t>=40?"bg-yellow-500":"bg-red-500")),style:{width:"".concat(e.progress,"%")}})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),e.startDate.toLocaleDateString()," - ",e.targetCompletionDate.toLocaleDateString()]}),e.courses&&e.courses.length>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ge.Z,{className:"h-4 w-4"}),e.courses.length," courses"]}),e.certifications&&e.certifications.length>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Fe.Z,{className:"h-4 w-4"}),e.certifications.length," certifications"]})]}),e.academyLinks&&e.academyLinks.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sazi Life Academy:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.academyLinks.map(((e,t)=>(0,s.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-md hover:bg-blue-100 transition-colors",children:[(0,s.jsx)(D.Z,{className:"h-3 w-3"}),"Course ",t+1]},t)))})]}),e.objectives&&e.objectives.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Objectives:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.objectives.slice(0,3).map(((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)(x.Z,{className:"h-3 w-3 mt-0.5 text-blue-600 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},t))),e.objectives.length>3&&(0,s.jsxs)("li",{className:"text-gray-500",children:["...and ",e.objectives.length-3," more"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>(e=>{C(e),N(e.id)})(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit plan",children:(0,s.jsx)(ee,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this development plan? This action cannot be undone."))try{await h(e)}catch(m){}})(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete plan",children:(0,s.jsx)(se.Z,{className:"h-4 w-4"})})]})]})},e.id);var t}))})]})})};var ze=a(30206),Ge=a(16689);(0,Ge.cF)(y.ZP,"gs://salatiso-ecosystem.appspot.com");var He,Je;!function(e){e.IDLE="idle",e.SYNCING="syncing",e.SUCCESS="success",e.ERROR="error",e.CONFLICT="conflict",e.OFFLINE="offline"}(He||(He={})),function(e){e.LAST_WRITE_WINS="last-write-wins",e.LOCAL_WINS="local-wins",e.REMOTE_WINS="remote-wins",e.MERGE="merge"}(Je||(Je={}));class Ke{async createProject(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/projects"));return(await(0,v.ET)(t,{...e,companyId:this.companyId,startDate:v.EK.fromDate(e.startDate),endDate:e.endDate?v.EK.fromDate(e.endDate):null,createdAt:v.EK.now(),updatedAt:v.EK.now()})).id}catch(t){throw t}}async updateProject(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/projects"),e),s={...t,updatedAt:v.EK.now()};t.startDate&&(s.startDate=v.EK.fromDate(t.startDate)),t.endDate&&(s.endDate=v.EK.fromDate(t.endDate)),await(0,v.r7)(a,s)}catch(a){throw a}}async deleteProject(e){try{const t=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/projects"),e);await(0,v.oe)(t)}catch(t){throw t}}async getProjects(){try{const e=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/projects")),t=(0,v.IO)(e,(0,v.Xo)("createdAt","desc"));return(await(0,v.PL)(t)).docs.map((e=>{var t,a,s,l;const i=e.data();return{...i,id:e.id,startDate:(null===(t=i.startDate)||void 0===t?void 0:t.toDate())||new Date,endDate:(null===(a=i.endDate)||void 0===a?void 0:a.toDate())||new Date,createdAt:(null===(s=i.createdAt)||void 0===s?void 0:s.toDate())||new Date,updatedAt:(null===(l=i.updatedAt)||void 0===l?void 0:l.toDate())||new Date}}))}catch(e){throw e}}async createTask(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/tasks"));return(await(0,v.ET)(t,{...e,startDate:e.startDate?v.EK.fromDate(e.startDate):null,dueDate:e.dueDate?v.EK.fromDate(e.dueDate):null,createdAt:v.EK.now(),updatedAt:v.EK.now()})).id}catch(t){throw t}}async updateTask(e,t){try{const a=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/tasks"),e),s={...t,updatedAt:v.EK.now()};t.startDate&&(s.startDate=v.EK.fromDate(t.startDate)),t.dueDate&&(s.dueDate=v.EK.fromDate(t.dueDate)),await(0,v.r7)(a,s)}catch(a){throw a}}async deleteTask(e){try{const t=(0,v.JU)(y.db,"companies/".concat(this.companyId,"/tasks"),e);await(0,v.oe)(t)}catch(t){throw t}}async getTasks(e){try{const t=(0,v.hJ)(y.db,"companies/".concat(this.companyId,"/tasks"));let a=(0,v.IO)(t,(0,v.Xo)("createdAt","desc"));e&&(a=(0,v.IO)(t,(0,v.ar)("projectId","==",e),(0,v.Xo)("createdAt","desc")));return(await(0,v.PL)(a)).docs.map((e=>{var t,a,s,l;const i=e.data();return{...i,id:e.id,startDate:null===(t=i.startDate)||void 0===t?void 0:t.toDate(),dueDate:null===(a=i.dueDate)||void 0===a?void 0:a.toDate(),createdAt:(null===(s=i.createdAt)||void 0===s?void 0:s.toDate())||new Date,updatedAt:(null===(l=i.updatedAt)||void 0===l?void 0:l.toDate())||new Date}}))}catch(t){throw t}}async createMilestone(e){try{const t=(0,v.JU)((0,v.hJ)(y.db,"companies",this.companyId,"operations","milestones","items")),a=t.id,s={...e,id:a,createdAt:new Date,updatedAt:new Date};return await(0,v.pl)(t,{...s,dueDate:v.EK.fromDate(s.dueDate),createdAt:serverTimestamp(),updatedAt:serverTimestamp()}),a}catch(t){throw t}}async updateMilestone(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"operations","milestones","items",e),s={...t,updatedAt:serverTimestamp()};t.dueDate&&(s.dueDate=v.EK.fromDate(t.dueDate)),await(0,v.r7)(a,s)}catch(a){throw a}}async deleteMilestone(e){try{const t=(0,v.JU)(y.db,"companies",this.companyId,"operations","milestones","items",e);await(0,v.oe)(t)}catch(t){throw t}}async getMilestones(e){try{const t=(0,v.hJ)(y.db,"companies",this.companyId,"operations","milestones","items");let a=(0,v.IO)(t,(0,v.Xo)("dueDate","asc"));e&&(a=(0,v.IO)(t,(0,v.ar)("projectId","==",e),(0,v.Xo)("dueDate","asc")));return(await(0,v.PL)(a)).docs.map((e=>{var t,a,s;const l=e.data();return{...l,id:e.id,dueDate:(null===(t=l.dueDate)||void 0===t?void 0:t.toDate())||new Date,createdAt:(null===(a=l.createdAt)||void 0===a?void 0:a.toDate())||new Date,updatedAt:(null===(s=l.updatedAt)||void 0===s?void 0:s.toDate())||new Date}}))}catch(t){throw t}}async createRisk(e){try{const t=(0,v.JU)((0,v.hJ)(y.db,"companies",this.companyId,"operations","risks","items")),a=t.id,s=e.probability*e.impact,l={...e,id:a,riskScore:s,createdAt:new Date,updatedAt:new Date};return await(0,v.pl)(t,{...l,reviewDate:v.EK.fromDate(l.reviewDate),createdAt:serverTimestamp(),updatedAt:serverTimestamp()}),a}catch(t){throw t}}async updateRisk(e,t){try{const a=(0,v.JU)(y.db,"companies",this.companyId,"operations","risks","items",e),s={...t,updatedAt:serverTimestamp()};if(t.probability&&t.impact)s.riskScore=t.probability*t.impact;else if(t.probability||t.impact){const e=await(0,v.QT)(a);if(e.exists()){const a=e.data(),l=t.probability||a.probability,i=t.impact||a.impact;s.riskScore=l*i}}t.reviewDate&&(s.reviewDate=v.EK.fromDate(t.reviewDate)),await(0,v.r7)(a,s)}catch(a){throw a}}async deleteRisk(e){try{const t=(0,v.JU)(y.db,"companies",this.companyId,"operations","risks","items",e);await(0,v.oe)(t)}catch(t){throw t}}async getRisks(e){try{const t=(0,v.hJ)(y.db,"companies",this.companyId,"operations","risks","items");let a=(0,v.IO)(t,(0,v.Xo)("riskScore","desc"));e&&(a=(0,v.IO)(t,(0,v.ar)("projectId","==",e),(0,v.Xo)("riskScore","desc")));return(await(0,v.PL)(a)).docs.map((e=>{var t,a,s;const l=e.data();return{...l,id:e.id,reviewDate:(null===(t=l.reviewDate)||void 0===t?void 0:t.toDate())||new Date,createdAt:(null===(a=l.createdAt)||void 0===a?void 0:a.toDate())||new Date,updatedAt:(null===(s=l.updatedAt)||void 0===s?void 0:s.toDate())||new Date}}))}catch(t){throw t}}constructor(e){this.companyId=e}}const qe=()=>{var e;const{state:t,dispatch:a}=w(),[s,i]=(0,l.useState)(!1),[n,r]=(0,l.useState)(null),[o,c]=(0,l.useState)(null);(0,l.useEffect)((()=>{var e;(null===(e=t.company)||void 0===e?void 0:e.id)&&!o&&c(new Ke(t.company.id))}),[null===(e=t.company)||void 0===e?void 0:e.id,o]);const d=t.operations,m=(0,l.useCallback)((async()=>{if(o){i(!0),r(null);try{const e=await o.getProjects();a({type:"UPDATE_OPERATIONS",data:{...d,projects:e}})}catch(e){r(e instanceof Error?e.message:"Failed to load projects")}finally{i(!1)}}}),[o,d,a]),u=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{const t=await o.createProject(e);return await m(),t}catch(t){const e=t instanceof Error?t.message:"Failed to create project";throw r(e),new Error(e)}finally{i(!1)}}),[o,m]),p=(0,l.useCallback)((async(e,t)=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.updateProject(e,t),await m()}catch(a){const e=a instanceof Error?a.message:"Failed to update project";throw r(e),new Error(e)}finally{i(!1)}}),[o,m]),x=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.deleteProject(e),await m()}catch(t){const e=t instanceof Error?t.message:"Failed to delete project";throw r(e),new Error(e)}finally{i(!1)}}),[o,m]),g=(0,l.useCallback)((async e=>{if(o){i(!0),r(null);try{const t=await o.getTasks(e);a({type:"UPDATE_OPERATIONS",payload:{...d,tasks:t}})}catch(t){r(t instanceof Error?t.message:"Failed to load tasks")}finally{i(!1)}}}),[o,d,a]),h=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{const t=await o.createTask(e);return await g(),t}catch(t){const e=t instanceof Error?t.message:"Failed to create task";throw r(e),new Error(e)}finally{i(!1)}}),[o,g]),y=(0,l.useCallback)((async(e,t)=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.updateTask(e,t),await g()}catch(a){const e=a instanceof Error?a.message:"Failed to update task";throw r(e),new Error(e)}finally{i(!1)}}),[o,g]),v=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.deleteTask(e),await g()}catch(t){const e=t instanceof Error?t.message:"Failed to delete task";throw r(e),new Error(e)}finally{i(!1)}}),[o,g]),b=(0,l.useCallback)((async e=>{if(o){i(!0),r(null);try{const t=await o.getMilestones(e);a({type:"UPDATE_OPERATIONS",payload:{...d,milestones:t}})}catch(t){r(t instanceof Error?t.message:"Failed to load milestones")}finally{i(!1)}}}),[o,d,a]),j=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{const t=await o.createMilestone(e);return await b(),t}catch(t){const e=t instanceof Error?t.message:"Failed to create milestone";throw r(e),new Error(e)}finally{i(!1)}}),[o,b]),f=(0,l.useCallback)((async(e,t)=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.updateMilestone(e,t),await b()}catch(a){const e=a instanceof Error?a.message:"Failed to update milestone";throw r(e),new Error(e)}finally{i(!1)}}),[o,b]),N=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.deleteMilestone(e),await b()}catch(t){const e=t instanceof Error?t.message:"Failed to delete milestone";throw r(e),new Error(e)}finally{i(!1)}}),[o,b]),D=(0,l.useCallback)((async e=>{if(o){i(!0),r(null);try{const t=await o.getRisks(e);a({type:"UPDATE_OPERATIONS",payload:{...d,risks:t}})}catch(t){r(t instanceof Error?t.message:"Failed to load risks")}finally{i(!1)}}}),[o,d,a]),C=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{const t=await o.createRisk(e);return await D(),t}catch(t){const e=t instanceof Error?t.message:"Failed to create risk";throw r(e),new Error(e)}finally{i(!1)}}),[o,D]),E=(0,l.useCallback)((async(e,t)=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.updateRisk(e,t),await D()}catch(a){const e=a instanceof Error?a.message:"Failed to update risk";throw r(e),new Error(e)}finally{i(!1)}}),[o,D]),k=(0,l.useCallback)((async e=>{if(!o)throw new Error("Service not initialized");i(!0),r(null);try{await o.deleteRisk(e),await D()}catch(t){const e=t instanceof Error?t.message:"Failed to delete risk";throw r(e),new Error(e)}finally{i(!1)}}),[o,D]);return{operations:d,loading:s,error:n,loadProjects:m,createProject:u,updateProject:p,deleteProject:x,loadTasks:g,createTask:h,updateTask:y,deleteTask:v,loadMilestones:b,createMilestone:j,updateMilestone:f,deleteMilestone:N,loadRisks:D,createRisk:C,updateRisk:E,deleteRisk:k}},Ve=e=>{let{className:t=""}=e;var a;const{operations:i,loading:n,error:r,loadProjects:c,createProject:m,updateProject:p,deleteProject:g}=qe(),{activityLogger:h}=U(""),[y,v]=(0,l.useState)(""),[b,j]=(0,l.useState)("all"),[f,N]=(0,l.useState)("all"),[w,D]=(0,l.useState)(!1),[C,E]=(0,l.useState)(null);(0,l.useEffect)((()=>{c()}),[c]);const k=null===(a=i.projects)||void 0===a?void 0:a.filter((e=>{const t=e.name.toLowerCase().includes(y.toLowerCase())||e.description.toLowerCase().includes(y.toLowerCase()),a="all"===b||e.status===b,s="all"===f||e.priority===f;return t&&a&&s})),I=e=>{switch(e){case"planning":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"on-hold":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-purple-100 text-purple-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=e=>{switch(e){case"critical":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(t),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsxs)("span",{className:"text-red-800",children:["Error loading projects: ",r]})]})}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Project Canvas"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage and track your projects"})]}),(0,s.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Add Project"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsx)("div",{className:"flex-1 min-w-64",children:(0,s.jsx)(F.Pg,{type:"text",placeholder:"Search projects...",value:y,onChange:e=>v(e.target.value),className:"w-full",icon:(0,s.jsx)(J.Z,{className:"h-5 w-5 text-gray-400"})})}),(0,s.jsxs)(F.SB,{value:b,onChange:e=>j(e.target.value),className:"min-w-32",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"planning",children:"Planning"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"on-hold",children:"On Hold"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,s.jsxs)(F.SB,{value:f,onChange:e=>N(e.target.value),className:"min-w-32",children:[(0,s.jsx)("option",{value:"all",children:"All Priority"}),(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map((e=>{var t,a;return(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(I(e.status)),children:e.status}),(0,s.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(ze.Z,{className:"h-5 w-5"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.progress,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-1 ".concat(S(e.priority))}),(0,s.jsxs)("span",{className:"text-gray-600 capitalize",children:[e.priority," Priority"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsxs)("span",{children:[(null===(t=e.teamMembers)||void 0===t?void 0:t.length)||0," members"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:e.endDate?new Date(e.endDate).toLocaleDateString():"No deadline"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>E(e),className:"p-2 text-gray-400 hover:text-blue-600",children:(0,s.jsx)(ke.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this project?"))try{await g(e)}catch(t){}})(e.id),className:"p-2 text-gray-400 hover:text-red-600",children:(0,s.jsx)(se.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(a=e.milestones)||void 0===a?void 0:a.length)||0," milestones"]})]})]})]},e.id)}))}),0===k.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:y||"all"!==b||"all"!==f?"Try adjusting your filters":"Get started by creating your first project"}),(0,s.jsxs)("button",{onClick:()=>D(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Create Project"]})]}),w&&(0,s.jsx)(Xe,{onSubmit:async e=>{try{await m(e),await(null===h||void 0===h?void 0:h.log("project_created",{projectName:e.name,description:e.description,status:e.status,priority:e.priority,startDate:e.startDate,targetEndDate:e.targetEndDate,budget:e.budget})),D(!1)}catch(t){}},onCancel:()=>D(!1)}),C&&(0,s.jsx)(Xe,{project:C,onSubmit:e=>(async(e,t)=>{try{await p(e,t),t.status&&await(null===h||void 0===h?void 0:h.log("project_status_changed",{projectId:e,newStatus:t.status,updatedDate:new Date})),E(null)}catch(a){}})(C.id,e),onCancel:()=>E(null)})]})},Xe=e=>{let{project:t,onSubmit:a,onCancel:i}=e;const[n,r]=(0,l.useState)({name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||"",status:(null===t||void 0===t?void 0:t.status)||"planning",priority:(null===t||void 0===t?void 0:t.priority)||"medium",startDate:(null===t||void 0===t?void 0:t.startDate)?new Date(t.startDate).toISOString().split("T")[0]:"",endDate:(null===t||void 0===t?void 0:t.endDate)?new Date(t.endDate).toISOString().split("T")[0]:"",budget:(null===t||void 0===t?void 0:t.budget)||0,currency:(null===t||void 0===t?void 0:t.currency)||"ZAR",managerId:(null===t||void 0===t?void 0:t.managerId)||"",teamMembers:(null===t||void 0===t?void 0:t.teamMembers)||[],milestones:(null===t||void 0===t?void 0:t.milestones)||[],deliverables:(null===t||void 0===t?void 0:t.deliverables)||[],progress:(null===t||void 0===t?void 0:t.progress)||0});return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t?"Edit Project":"Create New Project"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a({...n,startDate:new Date(n.startDate),endDate:n.endDate?new Date(n.endDate):void 0})},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Project Name",value:n.name,onChange:e=>r((t=>({...t,name:e.target.value}))),required:!0}),(0,s.jsxs)(F.SB,{label:"Status",value:n.status,onChange:e=>r((t=>({...t,status:e.target.value}))),children:[(0,s.jsx)("option",{value:"planning",children:"Planning"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"on-hold",children:"On Hold"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsx)(F.Pg,{label:"Description",value:n.description,onChange:e=>r((t=>({...t,description:e.target.value}))),as:"textarea",rows:3}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(F.SB,{label:"Priority",value:n.priority,onChange:e=>r((t=>({...t,priority:e.target.value}))),children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical"})]}),(0,s.jsx)(F.Pg,{label:"Progress (%)",type:"number",min:"0",max:"100",value:n.progress,onChange:e=>r((t=>({...t,progress:parseInt(e.target.value)||0})))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Start Date",type:"date",value:n.startDate,onChange:e=>r((t=>({...t,startDate:e.target.value}))),required:!0}),(0,s.jsx)(F.Pg,{label:"End Date",type:"date",value:n.endDate,onChange:e=>r((t=>({...t,endDate:e.target.value})))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t?"Update Project":"Create Project"})]})]})]})})};var Qe=a(93149),We=a(85087);const Ye=e=>{let{projectId:t,className:a=""}=e;const{tasks:i,projects:n,loading:r,error:c,createTask:m,updateTask:u,deleteTask:p,loadTasks:x}=qe(),{activityLogger:g}=U(""),[h,y]=(0,l.useState)(""),[v,b]=(0,l.useState)("all"),[j,f]=(0,l.useState)("all"),[N,w]=(0,l.useState)(!1),[D,E]=(0,l.useState)(null),[I,S]=(0,l.useState)(t||"all");(0,l.useEffect)((()=>{x("all"===I?void 0:I)}),[x,I]);const T=i.filter((e=>{const t=e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()),a="all"===v||e.status===v,s="all"===j||e.assignedTo===j,l="all"===I||e.projectId===I;return t&&a&&s&&l})),P=e=>{switch(e){case"critical":return"text-red-600 border-red-200";case"high":return"text-orange-600 border-orange-200";case"medium":return"text-yellow-600 border-yellow-200";case"low":return"text-green-600 border-green-200";default:return"text-gray-600 border-gray-200"}},R=e=>{switch(e){case"todo":default:return(0,s.jsx)(Qe.Z,{className:"h-4 w-4"});case"in-progress":return(0,s.jsx)(We.Z,{className:"h-4 w-4"});case"review":return(0,s.jsx)(A.Z,{className:"h-4 w-4"});case"completed":return(0,s.jsx)(k.Z,{className:"h-4 w-4"});case"cancelled":return(0,s.jsx)(C.Z,{className:"h-4 w-4"})}},_=async(e,t)=>{try{await u(e,t),t.status&&await(null===g||void 0===g?void 0:g.log("task_status_changed",{taskId:e,newStatus:t.status,updatedDate:new Date})),E(null)}catch(a){}},Z=async(e,t)=>{await _(e.id,{status:t})};return r?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(a),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg ".concat(a),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsxs)("span",{className:"text-red-800",children:["Error loading tasks: ",c]})]})}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Task Tracker"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage and track project tasks"})]}),(0,s.jsxs)(F.aj,{onClick:()=>w(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"New Task"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsx)("div",{className:"flex-1 min-w-64",children:(0,s.jsx)(F.Pg,{type:"text",placeholder:"Search tasks...",value:h,onChange:e=>y(e.target.value),className:"w-full",icon:(0,s.jsx)(J.Z,{className:"h-5 w-5 text-gray-400"})})}),!t&&(0,s.jsxs)(F.SB,{value:I,onChange:e=>S(e.target.value),className:"min-w-40",children:[(0,s.jsx)("option",{value:"all",children:"All Projects"}),n.map((e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,s.jsxs)(F.SB,{value:v,onChange:e=>b(e.target.value),className:"min-w-32",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"todo",children:"To Do"}),(0,s.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,s.jsx)("option",{value:"review",children:"Review"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,s.jsx)(F.SB,{value:j,onChange:e=>f(e.target.value),className:"min-w-32",children:(0,s.jsx)("option",{value:"all",children:"All Assignees"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:["todo","in-progress","review","completed"].map((e=>{const t=T.filter((t=>t.status===e));return(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 capitalize flex items-center",children:[R(e),(0,s.jsx)("span",{className:"ml-2",children:e.replace("-"," ")}),(0,s.jsx)("span",{className:"ml-2 bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs",children:t.length})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[t.map((t=>(0,s.jsxs)(o.E.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:t.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:t.description})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat(P(t.priority)),children:t.priority}),(0,s.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(ze.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(q.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:t.assignedTo||"Unassigned"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No due date"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:["todo"!==e&&(0,s.jsx)(F.aj,{onClick:()=>Z(t,"todo"),variant:"secondary",size:"sm",className:"px-2 py-1",children:(0,s.jsx)(Qe.Z,{className:"h-3 w-3"})}),"in-progress"!==e&&(0,s.jsx)(F.aj,{onClick:()=>Z(t,"in-progress"),variant:"secondary",size:"sm",className:"px-2 py-1",children:(0,s.jsx)(We.Z,{className:"h-3 w-3"})}),"review"!==e&&(0,s.jsx)(F.aj,{onClick:()=>Z(t,"review"),variant:"secondary",size:"sm",className:"px-2 py-1",children:(0,s.jsx)(A.Z,{className:"h-3 w-3"})}),"completed"!==e&&(0,s.jsx)(F.aj,{onClick:()=>Z(t,"completed"),variant:"secondary",size:"sm",className:"px-2 py-1",children:(0,s.jsx)(k.Z,{className:"h-3 w-3"})})]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(F.aj,{onClick:()=>E(t),variant:"secondary",size:"sm",children:(0,s.jsx)(ke.Z,{className:"h-3 w-3"})}),(0,s.jsx)(F.aj,{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this task?"))try{await p(e)}catch(t){}})(t.id),variant:"danger",size:"sm",children:(0,s.jsx)(se.Z,{className:"h-3 w-3"})})]})]})]},t.id))),0===t.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(Qe.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,s.jsxs)("p",{className:"text-sm",children:["No tasks in ",e.replace("-"," ")]})]})]})]},e)}))}),0===T.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(k.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:h||"all"!==v||"all"!==j?"Try adjusting your filters":"Get started by creating your first task"}),(0,s.jsxs)(F.aj,{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Create Task"]})]}),N&&(0,s.jsx)($e,{projects:n,selectedProject:I,onSubmit:async e=>{try{await m(e),await(null===g||void 0===g?void 0:g.log("task_created",{taskTitle:e.title,projectId:e.projectId,priority:e.priority,status:e.status,dueDate:e.dueDate,assignedTo:e.assignedTo})),w(!1)}catch(t){}},onCancel:()=>w(!1)}),D&&(0,s.jsx)($e,{task:D,projects:n,selectedProject:I,onSubmit:e=>_(D.id,e),onCancel:()=>E(null)})]})},$e=e=>{let{task:t,projects:a,selectedProject:i,onSubmit:n,onCancel:r}=e;const[o,c]=(0,l.useState)({title:(null===t||void 0===t?void 0:t.title)||"",description:(null===t||void 0===t?void 0:t.description)||"",status:(null===t||void 0===t?void 0:t.status)||"todo",priority:(null===t||void 0===t?void 0:t.priority)||"medium",projectId:(null===t||void 0===t?void 0:t.projectId)||i||"",assignedTo:(null===t||void 0===t?void 0:t.assignedTo)||"",dueDate:(null===t||void 0===t?void 0:t.dueDate)?new Date(t.dueDate).toISOString().split("T")[0]:"",estimatedHours:(null===t||void 0===t?void 0:t.estimatedHours)||0,actualHours:(null===t||void 0===t?void 0:t.actualHours)||0,tags:(null===t||void 0===t?void 0:t.tags)||[]});return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t?"Edit Task":"Create New Task"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({...o,dueDate:o.dueDate?new Date(o.dueDate):void 0})},className:"space-y-4",children:[(0,s.jsx)(F.Pg,{label:"Task Title",value:o.title,onChange:e=>c((t=>({...t,title:e.target.value}))),required:!0}),(0,s.jsx)(F.Pg,{label:"Description",value:o.description,onChange:e=>c((t=>({...t,description:e.target.value}))),as:"textarea",rows:3}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(F.SB,{label:"Status",value:o.status,onChange:e=>c((t=>({...t,status:e.target.value}))),children:[(0,s.jsx)("option",{value:"todo",children:"To Do"}),(0,s.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,s.jsx)("option",{value:"review",children:"Review"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,s.jsxs)(F.SB,{label:"Priority",value:o.priority,onChange:e=>c((t=>({...t,priority:e.target.value}))),children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(F.SB,{label:"Project",value:o.projectId,onChange:e=>c((t=>({...t,projectId:e.target.value}))),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Project"}),a.map((e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,s.jsx)(F.Pg,{label:"Assigned To",value:o.assignedTo,onChange:e=>c((t=>({...t,assignedTo:e.target.value}))),placeholder:"Enter assignee name or email"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)(F.Pg,{label:"Due Date",type:"date",value:o.dueDate,onChange:e=>c((t=>({...t,dueDate:e.target.value})))}),(0,s.jsx)(F.Pg,{label:"Estimated Hours",type:"number",min:"0",step:"0.5",value:o.estimatedHours,onChange:e=>c((t=>({...t,estimatedHours:parseFloat(e.target.value)||0})))}),(0,s.jsx)(F.Pg,{label:"Actual Hours",type:"number",min:"0",step:"0.5",value:o.actualHours,onChange:e=>c((t=>({...t,actualHours:parseFloat(e.target.value)||0})))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(F.aj,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),(0,s.jsx)(F.aj,{type:"submit",children:t?"Update Task":"Create Task"})]})]})]})})},et=e=>{let{projectId:t,className:a=""}=e;var i,n;const{operations:r,loading:c,error:m}=qe(),{activityLogger:u}=U(""),[p,g]=(0,l.useState)(t||"all"),h=(null===(i=r.projects)||void 0===i?void 0:i.flatMap((e=>{var t;return(null===(t=e.milestones)||void 0===t?void 0:t.map((t=>({...t,projectId:e.id,projectName:e.name}))))||[]})))||[],y=("all"===p?h:h.filter((e=>e.projectId===p))).sort(((e,t)=>(e.dueDate?new Date(e.dueDate).getTime():1/0)-(t.dueDate?new Date(t.dueDate).getTime():1/0))),v=e=>{switch(e){case"pending":default:return"bg-gray-100 text-gray-800 border-gray-200";case"completed":return"bg-green-100 text-green-800 border-green-200"}},b=e=>{switch(e){case"pending":default:return(0,s.jsx)(A.Z,{className:"h-5 w-5"});case"completed":return(0,s.jsx)(k.Z,{className:"h-5 w-5"})}},j=e=>!(!e.dueDate||"completed"===e.status)&&new Date(e.dueDate)<new Date;return c?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(a),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m?(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg ".concat(a),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsxs)("span",{className:"text-red-800",children:["Error loading milestones: ",m]})]})}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(a),children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Milestone Timeline"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track project milestones and deadlines"})]})}),!t&&(0,s.jsx)("div",{className:"max-w-xs",children:(0,s.jsx)(F.SB,{label:"Project",value:p,onChange:e=>g(e.target.value),options:[{value:"all",label:"All Projects"},...(null===(n=r.projects)||void 0===n?void 0:n.map((e=>({value:e.id,label:e.name}))))||[]]})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"}),(0,s.jsx)("div",{className:"space-y-8",children:y.map(((e,a)=>(0,s.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"relative flex items-start",children:[(0,s.jsx)("div",{className:"relative z-10 flex items-center justify-center w-16 h-16 rounded-full border-4 bg-white ".concat(v(e.status)),children:b(e.status)}),(0,s.jsxs)("div",{className:"ml-6 flex-1 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(v(e.status)),children:e.status}),!t&&(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-blue-100 text-blue-800",children:e.projectName})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsx)("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:e.dueDate?new Date(e.dueDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"No due date"})]})})]}),j(e)&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsx)("span",{className:"text-red-800 text-sm font-medium",children:"This milestone is overdue"})]})})]})]},e.id)))}),0===y.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No milestones found"}),(0,s.jsx)("p",{className:"text-gray-600",children:"all"===p?"Milestones will appear here once projects are created":"No milestones for the selected project yet"})]})]})]})},tt=e=>{let{className:t=""}=e;const{operations:a,loading:i,error:n}=qe(),{activityLogger:r}=U(""),[c,d]=(0,l.useState)(""),[m,u]=(0,l.useState)("all"),[p,x]=(0,l.useState)(null),g=[{id:"1",title:"Project Management Standard Operating Procedure",description:"Comprehensive guide for project lifecycle management and best practices",category:"Operations",fileType:"PDF",fileSize:2457600,lastModified:new Date("2024-01-15"),tags:["project management","SOP","processes"],url:"#",content:"Detailed SOP content would be here..."},{id:"2",title:"Risk Assessment Framework",description:"Framework for identifying, assessing, and mitigating project risks",category:"Risk Management",fileType:"DOCX",fileSize:512e3,lastModified:new Date("2024-01-10"),tags:["risk","assessment","mitigation"],url:"#",content:"Risk assessment framework content..."},{id:"3",title:"Quality Assurance Guidelines",description:"Quality standards and assurance procedures for all deliverables",category:"Quality",fileType:"PDF",fileSize:1843200,lastModified:new Date("2024-01-08"),tags:["quality","assurance","standards"],url:"#",content:"Quality assurance guidelines content..."},{id:"4",title:"Change Management Process",description:"Process for managing organizational changes and transitions",category:"Operations",fileType:"PPTX",fileSize:3145728,lastModified:new Date("2024-01-05"),tags:["change management","process","organizational"],url:"#",content:"Change management process content..."}],h=["all",...Array.from(new Set(g.map((e=>e.category))))],y=g.filter((e=>{const t=e.title.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())||e.tags.some((e=>e.toLowerCase().includes(c.toLowerCase()))),a="all"===m||e.category===m;return t&&a})),v=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},b=e=>{switch(e.toLowerCase()){case"pdf":return(0,s.jsx)(ue.Z,{className:"h-5 w-5 text-red-600"});case"docx":return(0,s.jsx)(ue.Z,{className:"h-5 w-5 text-blue-600"});case"pptx":return(0,s.jsx)(ue.Z,{className:"h-5 w-5 text-orange-600"});default:return(0,s.jsx)(ue.Z,{className:"h-5 w-5 text-gray-600"})}};return i?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(t),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsxs)("span",{className:"text-red-800",children:["Error loading knowledge base: ",n]})]})}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Base"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Access documentation, SOPs, and operational guides"})]})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(F.Pg,{label:"Search documents",value:c,onChange:e=>d(e.target.value),placeholder:"Search by title, description, or tags..."})}),(0,s.jsx)("div",{className:"sm:w-64",children:(0,s.jsx)(F.SB,{label:"Category",value:m,onChange:e=>u(e.target.value),options:h.map((e=>({value:e,label:"all"===e?"All Categories":e})))})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(((e,t)=>(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>(async e=>{await(null===r||void 0===r?void 0:r.log("document_accessed",{documentTitle:e.title,category:e.category,fileType:e.fileType,fileSize:e.fileSize,tags:e.tags})),x(e)})(e),children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:b(e.fileType)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-xs text-gray-500",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full",children:e.category}),(0,s.jsx)("span",{children:v(e.fileSize)}),(0,s.jsx)("span",{children:e.lastModified.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},e))),e.tags.length>3&&(0,s.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.tags.length-3," more"]})]})]})]})},e.id)))}),0===y.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(ge.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),(0,s.jsx)("p",{className:"text-gray-600",children:c||"all"!==m?"Try adjusting your search or filter criteria":"Knowledge base documents will appear here once they are added"})]}),p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)(o.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[b(p.fileType),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:p.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:p.category})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)(ye.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)(De.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>x(null),className:"p-2 text-gray-400 hover:text-gray-600",children:"\u2715"})]})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto max-h-96",children:(0,s.jsxs)("div",{className:"prose max-w-none",children:[(0,s.jsx)("p",{className:"text-gray-700 mb-4",children:p.description}),p.content&&(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold mb-2",children:"Document Content"}),(0,s.jsx)("p",{className:"text-gray-700",children:p.content})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"File Type:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:p.fileType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"File Size:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:v(p.fileSize)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Last Modified:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:p.lastModified.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Category:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:p.category})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Tags:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:p.tags.map((e=>(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},e)))})]})]})})]})})]})};var at=a(70231),st=a(17688);const lt=e=>{let{className:t=""}=e;var a;const{operations:i,loading:n,error:r}=qe(),{activityLogger:m}=U(""),[u,p]=(0,l.useState)(!1),[g,h]=(0,l.useState)(null),[y,v]=(0,l.useState)("all"),[b,j]=(0,l.useState)("all"),f=[{id:"1",title:"Resource Shortage",description:"Potential shortage of skilled developers for Phase 3 implementation",category:"Resource",probability:"medium",impact:"high",status:"mitigating",owner:"Project Manager",mitigationPlan:"Hire additional developers and provide training to existing team members",dueDate:new Date("2024-02-15"),projectId:"project-1",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-10")},{id:"2",title:"Technology Stack Changes",description:"Potential need to upgrade or change technology stack mid-project",category:"Technical",probability:"low",impact:"high",status:"identified",owner:"Technical Lead",mitigationPlan:"Conduct technology assessment and plan migration strategy",dueDate:new Date("2024-03-01"),projectId:"project-1",createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-05")},{id:"3",title:"Budget Overrun",description:"Project costs exceeding allocated budget",category:"Financial",probability:"medium",impact:"medium",status:"mitigated",owner:"Finance Manager",mitigationPlan:"Implement strict budget monitoring and approval processes",dueDate:new Date("2024-01-30"),projectId:"project-2",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-15")}].filter((e=>{const t="all"===y||e.projectId===y,a="all"===b||e.status===b;return t&&a})),N=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},w=e=>{switch(e){case"high":return(0,s.jsx)(c.Z,{className:"h-4 w-4"});case"medium":default:return(0,s.jsx)(at.Z,{className:"h-4 w-4"});case"low":return(0,s.jsx)(st.Z,{className:"h-4 w-4"})}},D=e=>{switch(e){case"identified":default:return"bg-gray-100 text-gray-800";case"mitigating":return"bg-blue-100 text-blue-800";case"mitigated":return"bg-green-100 text-green-800";case"closed":return"bg-purple-100 text-purple-800"}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(t),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsxs)("span",{className:"text-red-800",children:["Error loading risk register: ",r]})]})}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Risk Register"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage project risks and mitigation strategies"})]}),(0,s.jsxs)(F.aj,{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Add Risk"]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"sm:w-64",children:(0,s.jsx)(F.SB,{label:"Project",value:y,onChange:e=>v(e.target.value),options:[{value:"all",label:"All Projects"},...(null===(a=i.projects)||void 0===a?void 0:a.map((e=>({value:e.id,label:e.name}))))||[]]})}),(0,s.jsx)("div",{className:"sm:w-64",children:(0,s.jsx)(F.SB,{label:"Status",value:b,onChange:e=>j(e.target.value),options:[{value:"all",label:"All Statuses"},{value:"identified",label:"Identified"},{value:"mitigating",label:"Mitigating"},{value:"mitigated",label:"Mitigated"},{value:"closed",label:"Closed"}]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Risk Matrix"}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-center text-sm",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"font-medium text-gray-700",children:"Low Impact"}),(0,s.jsx)("div",{className:"font-medium text-gray-700",children:"Medium Impact"}),(0,s.jsx)("div",{className:"font-medium text-gray-700",children:"High Impact"}),(0,s.jsx)("div",{className:"font-medium text-gray-700 text-right pr-2",children:"High Prob"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("critical")),children:"Critical"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("high")),children:"High"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("critical")),children:"Critical"}),(0,s.jsx)("div",{className:"font-medium text-gray-700 text-right pr-2",children:"Med Prob"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("medium")),children:"Medium"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("medium")),children:"Medium"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("high")),children:"High"}),(0,s.jsx)("div",{className:"font-medium text-gray-700 text-right pr-2",children:"Low Prob"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("low")),children:"Low"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("low")),children:"Low"}),(0,s.jsx)("div",{className:"p-2 rounded border-2 ".concat(N("medium")),children:"Medium"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:f.map(((e,t)=>{var a,l;const n=((e,t)=>{const a=({low:1,medium:2,high:3}[e]||1)*({low:1,medium:2,high:3}[t]||1);return a>=6?"critical":a>=4?"high":a>=2?"medium":"low"})(e.probability,e.impact),r=(null===(l=i.projects)||void 0===l||null===(a=l.find((t=>t.id===e.projectId)))||void 0===a?void 0:a.name)||"Unknown Project";return(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-orange-600"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsxs)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(N(n)),children:[n.charAt(0).toUpperCase()+n.slice(1)," Risk"]}),(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(D(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Category: ",e.category]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[w(e.probability),(0,s.jsxs)("span",{className:"ml-2 text-gray-600",children:["Prob: ",e.probability.charAt(0).toUpperCase()+e.probability.slice(1)]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(me.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Impact: ",e.impact.charAt(0).toUpperCase()+e.impact.slice(1)]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(q.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Owner: ",e.owner]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 mt-3 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsxs)("span",{children:["Due: ",e.dueDate?new Date(e.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date"]})]}),!y&&(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:r})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,s.jsx)(F.aj,{onClick:()=>h(e),className:"p-2 text-gray-400 hover:text-blue-600",children:(0,s.jsx)(ke.Z,{className:"h-4 w-4"})}),(0,s.jsx)(F.aj,{onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this risk?")})(e.id),className:"p-2 text-gray-400 hover:text-red-600",children:(0,s.jsx)(se.Z,{className:"h-4 w-4"})})]})]}),e.mitigationPlan&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Mitigation Plan"}),(0,s.jsx)("p",{className:"text-blue-800",children:e.mitigationPlan})]})]},e.id)}))}),0===f.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(me.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No risks found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"all"!==y||"all"!==b?"Try adjusting your filters":"Start by identifying potential risks for your projects"}),(0,s.jsxs)(F.aj,{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Add First Risk"]})]}),(u||g)&&(0,s.jsx)(it,{risk:g,projects:i.projects||[],onSubmit:g?e=>(async(e,t)=>{try{t.mitigationPlan&&await(null===m||void 0===m?void 0:m.log("mitigation_plan_created",{riskId:e,riskTitle:t.title,mitigationPlan:t.mitigationPlan,status:t.status,dueDate:t.dueDate})),h(null)}catch(a){}})(g.id,e):async e=>{try{await(null===m||void 0===m?void 0:m.log("risk_identified",{riskTitle:e.title,category:e.category,probability:e.probability,impact:e.impact,status:e.status,owner:e.owner,projectId:e.projectId})),p(!1)}catch(t){}},onCancel:()=>{p(!1),h(null)}})]})},it=e=>{let{risk:t,projects:a,onSubmit:i,onCancel:n}=e;const[r,o]=(0,l.useState)({title:(null===t||void 0===t?void 0:t.title)||"",description:(null===t||void 0===t?void 0:t.description)||"",category:(null===t||void 0===t?void 0:t.category)||"Technical",probability:(null===t||void 0===t?void 0:t.probability)||"medium",impact:(null===t||void 0===t?void 0:t.impact)||"medium",status:(null===t||void 0===t?void 0:t.status)||"identified",owner:(null===t||void 0===t?void 0:t.owner)||"",mitigationPlan:(null===t||void 0===t?void 0:t.mitigationPlan)||"",dueDate:(null===t||void 0===t?void 0:t.dueDate)?new Date(t.dueDate).toISOString().split("T")[0]:"",projectId:(null===t||void 0===t?void 0:t.projectId)||""});return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t?"Edit Risk":"Create New Risk"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...r,dueDate:r.dueDate?new Date(r.dueDate):void 0})},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",value:r.title,onChange:e=>o((t=>({...t,title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:r.description,onChange:e=>o((t=>({...t,description:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:r.category,onChange:e=>o((t=>({...t,category:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"Technical",children:"Technical"}),(0,s.jsx)("option",{value:"Resource",children:"Resource"}),(0,s.jsx)("option",{value:"Financial",children:"Financial"}),(0,s.jsx)("option",{value:"Schedule",children:"Schedule"}),(0,s.jsx)("option",{value:"Quality",children:"Quality"}),(0,s.jsx)("option",{value:"External",children:"External"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),(0,s.jsxs)("select",{value:r.projectId,onChange:e=>o((t=>({...t,projectId:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Project"}),a.map((e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Probability"}),(0,s.jsxs)("select",{value:r.probability,onChange:e=>o((t=>({...t,probability:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Impact"}),(0,s.jsxs)("select",{value:r.impact,onChange:e=>o((t=>({...t,impact:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:r.status,onChange:e=>o((t=>({...t,status:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"identified",children:"Identified"}),(0,s.jsx)("option",{value:"mitigating",children:"Mitigating"}),(0,s.jsx)("option",{value:"mitigated",children:"Mitigated"}),(0,s.jsx)("option",{value:"closed",children:"Closed"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),(0,s.jsx)("input",{type:"text",value:r.owner,onChange:e=>o((t=>({...t,owner:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter risk owner name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,s.jsx)("input",{type:"date",value:r.dueDate,onChange:e=>o((t=>({...t,dueDate:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mitigation Plan"}),(0,s.jsx)("textarea",{value:r.mitigationPlan,onChange:e=>o((t=>({...t,mitigationPlan:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe how this risk will be mitigated"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(F.aj,{type:"button",variant:"secondary",onClick:n,children:"Cancel"}),(0,s.jsx)(F.aj,{type:"submit",children:t?"Update Risk":"Create Risk"})]})]})]})})};var nt=a(60268);const rt=e=>{let{className:t=""}=e;const{operations:a,loading:i,error:n}=qe(),{activityLogger:r}=U(""),[c,m]=(0,l.useState)(!1),[u,p]=(0,l.useState)(null),[x,g]=(0,l.useState)("all"),[h,y]=(0,l.useState)("all"),v=[{id:"1",title:"Minor Equipment Malfunction",description:"Development server experienced temporary outage due to network connectivity issues",incidentType:"operational",severity:"medium",status:"resolved",reportedBy:"System Administrator",reportedDate:new Date("2024-01-10"),incidentDate:new Date("2024-01-10"),location:"Data Center",affectedParties:["Development Team","Operations Team"],immediateActions:"Restarted network equipment and monitored system recovery",investigationFindings:"Network switch firmware needed updating",correctiveActions:"Updated firmware and implemented monitoring alerts",preventionMeasures:"Scheduled regular firmware updates and enhanced monitoring",projectId:"project-1"},{id:"2",title:"Data Backup Failure",description:"Automated backup process failed for three consecutive days",incidentType:"security",severity:"high",status:"investigating",reportedBy:"IT Security Officer",reportedDate:new Date("2024-01-15"),incidentDate:new Date("2024-01-12"),location:"Backup Server Room",affectedParties:["IT Department","Data Protection Team"],immediateActions:"Initiated manual backup procedures and verified data integrity",investigationFindings:"",correctiveActions:"",preventionMeasures:"",projectId:"project-2"}],b=v.filter((e=>{const t="all"===x||e.status===x,a="all"===h||e.incidentType===h;return t&&a})),j=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=e=>{switch(e){case"reported":default:return"bg-gray-100 text-gray-800";case"investigating":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-purple-100 text-purple-800"}},N=e=>{switch(e){case"safety":return"\ud83d\udee1\ufe0f";case"security":return"\ud83d\udd12";case"environmental":return"\ud83c\udf31";case"operational":return"\u2699\ufe0f";default:return"\ud83d\udccb"}};return i?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(t),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg ".concat(t),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsxs)("span",{className:"text-red-800",children:["Error loading incident reports: ",n]})]})}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Incident Reports"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track and manage safety and operational incidents"})]}),(0,s.jsxs)(F.aj,{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Report Incident"]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"sm:w-64",children:(0,s.jsx)(F.SB,{label:"Status",value:x,onChange:e=>g(e.target.value),options:[{value:"all",label:"All Statuses"},{value:"reported",label:"Reported"},{value:"investigating",label:"Investigating"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})}),(0,s.jsx)("div",{className:"sm:w-64",children:(0,s.jsx)(F.SB,{label:"Type",value:h,onChange:e=>y(e.target.value),options:[{value:"all",label:"All Types"},{value:"safety",label:"Safety"},{value:"security",label:"Security"},{value:"environmental",label:"Environmental"},{value:"operational",label:"Operational"},{value:"other",label:"Other"}]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-8 w-8 text-red-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Critical"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.filter((e=>"critical"===e.severity)).length})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(de.Z,{className:"h-8 w-8 text-orange-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"High"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.filter((e=>"high"===e.severity)).length})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(A.Z,{className:"h-8 w-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Investigating"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.filter((e=>"investigating"===e.status)).length})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(k.Z,{className:"h-8 w-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.filter((e=>"resolved"===e.status)).length})]})]})})]}),(0,s.jsx)("div",{className:"space-y-4",children:b.map(((e,t)=>{var l,i;const n=(null===(i=a.projects)||void 0===i||null===(l=i.find((t=>t.id===e.projectId)))||void 0===l?void 0:l.name)||"Unknown Project";return(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:N(e.incidentType)}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(j(e.severity)),children:e.severity.charAt(0).toUpperCase()+e.severity.slice(1)}),(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(f(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(q.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Reported by: ",e.reportedBy]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Incident: ",e.incidentDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(te.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Location: ",e.location]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ue.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-gray-600 capitalize",children:e.incidentType})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:n}),(0,s.jsxs)("span",{children:["Affected: ",e.affectedParties.join(", ")]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,s.jsx)(F.aj,{onClick:()=>p(e),className:"p-2 text-gray-400 hover:text-blue-600",children:(0,s.jsx)(ye.Z,{className:"h-4 w-4"})}),(0,s.jsx)(F.aj,{onClick:()=>p(e),className:"p-2 text-gray-400 hover:text-green-600",children:(0,s.jsx)(ke.Z,{className:"h-4 w-4"})})]})]}),e.immediateActions&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"Immediate Actions Taken"}),(0,s.jsx)("p",{className:"text-yellow-800",children:e.immediateActions})]})]},e.id)}))}),0===b.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(ue.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No incident reports found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"all"!==x||"all"!==h?"Try adjusting your filters":"No incidents have been reported yet"}),(0,s.jsxs)(F.aj,{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(le.Z,{className:"h-5 w-5 mr-2"}),"Report First Incident"]})]}),c&&(0,s.jsx)(ot,{onSubmit:async e=>{try{await(null===r||void 0===r?void 0:r.log("incident_reported",{incidentTitle:e.title,incidentType:e.incidentType,severity:e.severity,reportedBy:e.reportedBy,location:e.location,affectedPartiesCount:e.affectedParties.length})),m(!1)}catch(t){}},onCancel:()=>m(!1),projects:a.projects||[]}),u&&(0,s.jsx)(ct,{incident:u,onUpdate:e=>(async(e,t)=>{try{("investigating"===t.status||t.investigationFindings)&&await(null===r||void 0===r?void 0:r.log("investigation_started",{incidentId:e,incidentTitle:t.title,status:t.status,investigationFindings:t.investigationFindings})),p(null)}catch(a){}})(u.id,e),onClose:()=>p(null)})]})},ot=e=>{let{onSubmit:t,onCancel:a,projects:i}=e;const[n,r]=(0,l.useState)({title:"",description:"",incidentType:"operational",severity:"medium",status:"reported",reportedBy:"",incidentDate:(new Date).toISOString().split("T")[0],location:"",affectedParties:[],immediateActions:"",investigationFindings:"",correctiveActions:"",preventionMeasures:"",projectId:""});return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Report New Incident"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({...n,incidentDate:new Date(n.incidentDate),affectedParties:n.affectedParties.filter((e=>""!==e.trim()))})},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,s.jsx)("input",{type:"text",value:n.title,onChange:e=>r((t=>({...t,title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reported By *"}),(0,s.jsx)("input",{type:"text",value:n.reportedBy,onChange:e=>r((t=>({...t,reportedBy:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,s.jsx)("textarea",{value:n.description,onChange:e=>r((t=>({...t,description:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,s.jsxs)("select",{value:n.incidentType,onChange:e=>r((t=>({...t,incidentType:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"safety",children:"Safety"}),(0,s.jsx)("option",{value:"security",children:"Security"}),(0,s.jsx)("option",{value:"environmental",children:"Environmental"}),(0,s.jsx)("option",{value:"operational",children:"Operational"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),(0,s.jsxs)("select",{value:n.severity,onChange:e=>r((t=>({...t,severity:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incident Date *"}),(0,s.jsx)("input",{type:"date",value:n.incidentDate,onChange:e=>r((t=>({...t,incidentDate:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),(0,s.jsxs)("select",{value:n.projectId,onChange:e=>r((t=>({...t,projectId:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select Project"}),i.map((e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)("input",{type:"text",value:n.location,onChange:e=>r((t=>({...t,location:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Where did the incident occur?"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:n.status,onChange:e=>r((t=>({...t,status:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"reported",children:"Reported"}),(0,s.jsx)("option",{value:"investigating",children:"Investigating"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"}),(0,s.jsx)("option",{value:"closed",children:"Closed"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Affected Parties"}),n.affectedParties.map(((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{r((a=>({...a,affectedParties:a.affectedParties.map(((a,s)=>s===e?t:a))})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter affected party"}),(0,s.jsx)(F.aj,{type:"button",onClick:()=>(e=>{r((t=>({...t,affectedParties:t.affectedParties.filter(((t,a)=>a!==e))})))})(t),className:"p-2 text-red-600 hover:text-red-800",children:(0,s.jsx)(nt.Z,{className:"h-5 w-5"})})]},t))),(0,s.jsx)(F.aj,{type:"button",onClick:()=>{r((e=>({...e,affectedParties:[...e.affectedParties,""]})))},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Add Affected Party"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Immediate Actions Taken"}),(0,s.jsx)("textarea",{value:n.immediateActions,onChange:e=>r((t=>({...t,immediateActions:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What immediate actions were taken to contain the incident?"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(F.aj,{type:"button",variant:"secondary",onClick:a,children:"Cancel"}),(0,s.jsx)(F.aj,{type:"submit",children:"Report Incident"})]})]})]})})},ct=e=>{let{incident:t,onUpdate:a,onClose:i}=e;const[n,r]=(0,l.useState)(!1),[o,c]=(0,l.useState)({});return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Incident Details"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F.aj,{onClick:()=>r(!n),className:"p-2 text-gray-400 hover:text-blue-600",children:(0,s.jsx)(ke.Z,{className:"h-5 w-5"})}),(0,s.jsx)(F.aj,{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600",children:"\u2715"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n?(0,s.jsx)("input",{type:"text",value:o.title||t.title,onChange:e=>c((t=>({...t,title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}):(0,s.jsx)("p",{className:"text-gray-900",children:t.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n?(0,s.jsxs)("select",{value:o.status||t.status,onChange:e=>c((t=>({...t,status:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{value:"reported",children:"Reported"}),(0,s.jsx)("option",{value:"investigating",children:"Investigating"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"}),(0,s.jsx)("option",{value:"closed",children:"Closed"})]}):(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(getStatusColor(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n?(0,s.jsx)("textarea",{value:o.description||t.description,onChange:e=>c((t=>({...t,description:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}):(0,s.jsx)("p",{className:"text-gray-900",children:t.description})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Immediate Actions"}),n?(0,s.jsx)("textarea",{value:o.immediateActions||t.immediateActions,onChange:e=>c((t=>({...t,immediateActions:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}):(0,s.jsx)("p",{className:"text-gray-900",children:t.immediateActions||"No immediate actions recorded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investigation Findings"}),n?(0,s.jsx)("textarea",{value:o.investigationFindings||t.investigationFindings,onChange:e=>c((t=>({...t,investigationFindings:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}):(0,s.jsx)("p",{className:"text-gray-900",children:t.investigationFindings||"Investigation not yet completed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Corrective Actions"}),n?(0,s.jsx)("textarea",{value:o.correctiveActions||t.correctiveActions,onChange:e=>c((t=>({...t,correctiveActions:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}):(0,s.jsx)("p",{className:"text-gray-900",children:t.correctiveActions||"No corrective actions defined"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prevention Measures"}),n?(0,s.jsx)("textarea",{value:o.preventionMeasures||t.preventionMeasures,onChange:e=>c((t=>({...t,preventionMeasures:e.target.value}))),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}):(0,s.jsx)("p",{className:"text-gray-900",children:t.preventionMeasures||"No prevention measures defined"})]})]}),n&&(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(F.aj,{type:"button",variant:"secondary",onClick:()=>{r(!1),c({})},children:"Cancel"}),(0,s.jsx)(F.aj,{onClick:()=>{a(o),r(!1)},children:"Save Changes"})]})]})]})})};var dt=()=>{const{user:e}=(0,h.a)(),[t,a]=(0,l.useState)("bizhelp"),i=[{id:"bizhelp",title:"BizHelp Integration",description:"Unified business operations dashboard",icon:c.Z,color:"bg-indigo-500"},{id:"activity-feed",title:"Activity Feed",description:"Cross-app activity tracking and sync",icon:d.Z,color:"bg-cyan-500"},{id:"governance",title:"Governance",description:"Company constitution, board management, compliance",icon:m.Z,color:"bg-blue-500"},{id:"human-capital",title:"Human Capital",description:"HR management, talent development, succession planning",icon:u.Z,color:"bg-green-500"},{id:"operations",title:"Operations",description:"Business operations, processes, quality management",icon:p.Z,color:"bg-purple-500"},{id:"finance",title:"Finance",description:"Financial management, reporting, compliance",icon:c.Z,color:"bg-yellow-500"},{id:"marketing",title:"Marketing",description:"Brand management, market strategy, communications",icon:x.Z,color:"bg-pink-500"},{id:"reporting",title:"Reporting",description:"Analytics, dashboards, performance monitoring",icon:g.Z,color:"bg-indigo-500"}];return(0,s.jsx)(N,{children:(0,s.jsxs)(r.Z,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"Professional Management - Salatiso Ecosystem"}),(0,s.jsx)("meta",{name:"description",content:"Professional management system for company governance and operations"})]}),(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Professional Management"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Comprehensive enterprise management system for governance, operations, and strategic planning"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,s.jsx)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Modules"}),(0,s.jsx)("nav",{className:"space-y-2",children:i.map((e=>{const l=e.icon;return(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"w-full flex items-center px-3 py-2 rounded-md text-left transition-colors ".concat(t===e.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-500":"text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)(l,{className:"h-5 w-5 mr-3 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})]},e.id)}))})]})}),(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-3",children:(()=>{switch(t){case"bizhelp":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"BizHelp Operations Dashboard"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Integrated view of all business operations from BizHelp platform"})]})}),e&&(0,s.jsx)(G,{companyId:e.businessId||e.id,compact:!1,onNavigate:e=>window.open(e,"_blank")})]});case"activity-feed":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Cross-App Activity Feed"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Real-time activity synchronization across MNI, BizHelp, and Hub platforms"})]})}),e&&(0,s.jsx)(Y,{companyId:e.businessId||e.id,maxItems:100,compact:!1})]});case"governance":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Company Governance"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage company constitution, board members, and compliance"})]})}),(0,s.jsx)(ce,{}),(0,s.jsx)(pe,{}),(0,s.jsx)(ve,{}),(0,s.jsx)(we,{}),(0,s.jsx)(Ce,{})]});case"human-capital":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Human Capital Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Talent development, succession planning, and HR operations"})]})}),(0,s.jsx)(Pe,{}),(0,s.jsx)(_e,{}),(0,s.jsx)(Le,{}),(0,s.jsx)(Me,{}),(0,s.jsx)(Be,{})]});case"operations":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Operations Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Project management, risk assessment, and operational excellence"})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(Ve,{})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"xl:col-span-2",children:(0,s.jsx)(Ye,{})}),(0,s.jsx)("div",{children:(0,s.jsx)(et,{})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(tt,{}),(0,s.jsx)(lt,{})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,s.jsx)(rt,{})})]});case"finance":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Financial Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Financial reporting, compliance, and business intelligence"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Finance Module"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Coming soon - Financial management and reporting tools"})]})})]});case"marketing":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Marketing & Communications"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Brand management, market strategy, and stakeholder communications"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Marketing Module"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Coming soon - Marketing and communications tools"})]})})]});case"reporting":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytics & Reporting"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Performance monitoring, dashboards, and business intelligence"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(g.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Reporting Module"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Coming soon - Analytics and reporting dashboards"})]})})]});default:return null}})()})]})]})})]})})}}},function(e){e.O(0,[2441,2023,5037,6194,2888,9774,179],(function(){return t=3276,e(e.s=t);var t}));var t=e.O();_N_E=t}]);