(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4226],{44254:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/intranet/settings/notifications",function(){return s(75601)}])},77918:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});const t=(0,s(63759).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},86691:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});const t=(0,s(63759).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},15452:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});const t=(0,s(63759).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},90163:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});const t=(0,s(63759).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},69819:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});const t=(0,s(63759).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},55264:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});const t=(0,s(63759).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},75601:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j},metadata:function(){return b}});var t=s(85893),r=s(67294),n=s(77918),i=s(90163),l=s(69819),c=s(55264),o=s(15452),d=s(86691),h=s(63759);const x=(0,h.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),f=(0,h.Z)("Vibrate",[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]]);var p=s(60837),m=s(19498),u=s(48654),g=s(62659);const y=()=>{const{user:e}=(0,p.a)(),a=(0,g.useToast)(),[s,h]=(0,r.useState)(null),[y,b]=(0,r.useState)(!0),[j,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)([]);if((0,r.useEffect)((()=>{if(!(null===e||void 0===e?void 0:e.id))return;(async()=>{try{b(!0);const a=await m.Z.getUserPreferences(e.id);h(a),w([])}catch(s){const e=s instanceof Error?s.message:"Failed to load preferences";w([e]),a.error(e)}finally{b(!1)}})()}),[null===e||void 0===e?void 0:e.id,a]),y)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading preferences..."})]})});if(!s)return(0,t.jsx)("div",{className:"text-red-600",children:"Failed to load preferences"});const k=(e,a)=>{h({...s,channels:{...s.channels,[e]:{...s.channels[e],enabled:a}}})},Z=async()=>{try{N(!0);const t=m.Z.validatePreferences(s);if(t.length>0)return void w(t);if(!(null===e||void 0===e?void 0:e.id))throw new Error("User not authenticated");await m.Z.updateUserPreferences(e.id,s),w([]),a.success("Notification preferences saved successfully")}catch(t){const e=t instanceof Error?t.message:"Failed to save preferences";w([e]),a.error(e)}finally{N(!1)}},C=async()=>{if(confirm("Reset all notification preferences to defaults?"))try{if(N(!0),!(null===e||void 0===e?void 0:e.id))throw new Error("User not authenticated");await m.Z.resetToDefaults(e.id);const s=await m.Z.getUserPreferences(e.id);h(s),w([]),a.success("Preferences reset to defaults")}catch(s){const e=s instanceof Error?s.message:"Failed to reset preferences";w([e]),a.error(e)}finally{N(!1)}};var E,S;return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(n.Z,{className:"w-8 h-8 text-primary-600"}),"Notification Preferences"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:C,disabled:j,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg disabled:opacity-50 transition",children:[(0,t.jsx)(i.Z,{className:"w-4 h-4"}),"Reset"]}),(0,t.jsxs)("button",{onClick:Z,disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg disabled:opacity-50 transition",children:[(0,t.jsx)(l.Z,{className:"w-4 h-4"}),j?"Saving...":"Save"]})]})]}),v.length>0&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 space-y-2",children:v.map(((e,a)=>(0,t.jsxs)("p",{className:"text-red-700 text-sm",children:["\u2022 ",e]},a)))}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"w-5 h-5"}),"Notification Channels"]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Choose which communication channels you'd like to receive notifications through."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.Z,{className:"w-5 h-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Web Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"In-app notifications"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:s.channels.web.enabled,onChange:e=>k(u.dm.WEB,e.target.checked),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Browser Push"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Desktop/browser notifications"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:s.channels.push.enabled,onChange:e=>k(u.dm.PUSH,e.target.checked),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg opacity-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(d.Z,{className:"w-5 h-5 text-orange-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Email"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Coming soon"})]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Coming soon"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg opacity-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"SMS"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Coming soon"})]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Coming soon"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Notification Types"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Select which types of escalation notifications you want to receive."}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"escalationCreated",label:"New Escalation",desc:"When a new escalation is created"},{key:"escalationAssigned",label:"Assignment",desc:"When you are assigned to handle an escalation"},{key:"escalationEscalated",label:"Escalated",desc:"When an escalation moves to a higher level"},{key:"escalationResolved",label:"Resolved",desc:"When an escalation is resolved"},{key:"escalationUrgent",label:"Urgent",desc:"Urgent escalations requiring immediate action"},{key:"responseDue",label:"Response Due",desc:"When response deadline is approaching"}].map((e=>{let{key:a,label:r,desc:n}=e;return(0,t.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer mt-1",children:[(0,t.jsx)("input",{type:"checkbox",checked:s.types[a],onChange:e=>((e,a)=>{h({...s,types:{...s.types,[e]:a}})})(a,e.target.checked),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-6 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-300 rounded peer peer-checked:after:content-['\u2713'] after:absolute after:top-[2px] after:left-[6px] after:text-white after:font-bold after:transition-all peer-checked:bg-primary-600"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:r}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:n})]})]},a)}))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Escalation Contexts"}),(0,t.jsx)("div",{className:"space-y-3",children:["health","safety","property","emotional","financial","legal","other"].map((e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:s.escalationContextNotifications[e],onChange:a=>((e,a)=>{h({...s,escalationContextNotifications:{...s.escalationContextNotifications,[e]:a}})})(e,a.target.checked),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-5 h-5 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-300 rounded peer peer-checked:bg-primary-600"})]}),(0,t.jsx)("span",{className:"text-gray-700 capitalize",children:e})]},e)))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Escalation Levels"}),(0,t.jsx)("div",{className:"space-y-3",children:["individual","family","community","professional"].map((e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:s.escalationLevelNotifications[e],onChange:a=>((e,a)=>{h({...s,escalationLevelNotifications:{...s.escalationLevelNotifications,[e]:a}})})(e,a.target.checked),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-5 h-5 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-300 rounded peer peer-checked:bg-primary-600"})]}),(0,t.jsx)("span",{className:"text-gray-700 capitalize",children:e})]},e)))})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Audio & Vibration"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(x,{className:"w-5 h-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Sound"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Play sound on notification"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:null===(E=s.soundEnabled)||void 0===E||E,onChange:e=>{return a=e.target.checked,void h({...s,soundEnabled:a});var a},className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(f,{className:"w-5 h-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Vibration"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Vibrate on notification (mobile)"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:null===(S=s.vibrationEnabled)||void 0===S||S,onChange:e=>{return a=e.target.checked,void h({...s,vibrationEnabled:a});var a},className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:C,disabled:j,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg disabled:opacity-50 transition",children:"Reset to Defaults"}),(0,t.jsxs)("button",{onClick:Z,disabled:j,className:"px-6 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg disabled:opacity-50 transition flex items-center gap-2",children:[(0,t.jsx)(l.Z,{className:"w-4 h-4"}),j?"Saving...":"Save Preferences"]})]})]})};const b={title:"Notification Settings | Salatiso",description:"Manage your notification preferences and alerts"};function j(){return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsx)(y,{})})}}},function(e){e.O(0,[8285,2888,9774,179],(function(){return a=44254,e(e.s=a);var a}));var a=e.O();_N_E=a}]);