(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8026],{40528:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return i(25708)}])},99737:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},18742:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},12438:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},59911:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},11773:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},42540:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},89726:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},56286:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});const n=(0,i(1).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},25708:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var n=i(85893),s=i(67294),a=i(9008),r=i.n(a),o=i(11163),d=i(37568),c=i(95818),l=i(99724);const m=(0,s.createContext)(void 0),h={currentContext:"personal",sidebarCollapsed:!1,darkMode:!1,kidsMode:!1,hiddenWidgets:[],lastUpdated:Date.now()},x=e=>{let{children:t}=e;const{user:i}=(0,d.a)(),[a,r]=(0,s.useState)(h),[o,x]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{if(!(null===i||void 0===i?void 0:i.id))return r(h),void x(!1);try{x(!0),g(null);const e=(0,l.JU)(c.db,"users",i.id,"dashboardPreferences","settings"),t=await(0,l.QT)(e);t.exists()?r(t.data()):(await(0,l.pl)(e,h),r(h))}catch(e){g(e instanceof Error?e.message:"Failed to load preferences"),r(h)}finally{x(!1)}})()}),[null===i||void 0===i?void 0:i.id]);const u=(0,s.useCallback)((async e=>{if(null===i||void 0===i?void 0:i.id)try{g(null);const t=(0,l.JU)(c.db,"users",i.id,"dashboardPreferences","settings"),n={...a,...e,lastUpdated:Date.now()};await(0,l.r7)(t,n),r(n)}catch(t){g(t instanceof Error?t.message:"Failed to save preferences")}}),[null===i||void 0===i?void 0:i.id,a]),y=(0,s.useCallback)((async e=>{r((t=>({...t,currentContext:e}))),await u({currentContext:e})}),[u]),b=(0,s.useCallback)((async()=>{const e=!a.sidebarCollapsed;r((t=>({...t,sidebarCollapsed:e}))),await u({sidebarCollapsed:e})}),[a.sidebarCollapsed,u]),w=(0,s.useCallback)((async()=>{const e=!a.darkMode;r((t=>({...t,darkMode:e}))),await u({darkMode:e})}),[a.darkMode,u]),f=(0,s.useCallback)((async()=>{const e=!a.kidsMode;r((t=>({...t,kidsMode:e}))),await u({kidsMode:e})}),[a.kidsMode,u]),v=(0,s.useCallback)((async e=>{const t=a.hiddenWidgets.includes(e)?a.hiddenWidgets.filter((t=>t!==e)):[...a.hiddenWidgets,e];r((e=>({...e,hiddenWidgets:t}))),await u({hiddenWidgets:t})}),[a.hiddenWidgets,u]),k=(0,s.useCallback)((async e=>{r((t=>({...t,hiddenWidgets:e}))),await u({hiddenWidgets:e})}),[u]),j={currentContext:a.currentContext,sidebarCollapsed:a.sidebarCollapsed,darkMode:a.darkMode,kidsMode:a.kidsMode,hiddenWidgets:a.hiddenWidgets,isLoading:o,error:p,setContext:y,toggleSidebar:b,toggleDarkMode:w,toggleKidsMode:f,toggleWidgetVisibility:v,setHiddenWidgets:k};return(0,n.jsx)(m.Provider,{value:j,children:t})},p=()=>{const e=(0,s.useContext)(m);if(!e)throw new Error("useLayoutContext must be used within a LayoutProvider");return e};var g=i(36721),u=i(12438),y=i(22972),b=i(59911);const w=()=>{const{currentContext:e,setContext:t,sidebarCollapsed:i,toggleSidebar:a,darkMode:r,kidsMode:o,hiddenWidgets:d,isLoading:c}=p(),[l,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=()=>{m(window.innerWidth<768),x(window.innerWidth>=768&&window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const w=(0,s.useMemo)((()=>({personal:[{id:"welcome",title:"Welcome",component:g.rV,description:"Daily greeting and motivation",position:{x:0,y:0,width:l?12:6,height:2},context:"personal"},{id:"ecosystem-health",title:"Ecosystem Health",component:g.s$,description:"System and family overview",position:{x:l?0:6,y:l?2:0,width:6,height:2},context:"personal"},{id:"gamification",title:"Trust & Achievements",component:g.UI,description:"Your achievements and trust score",position:{x:0,y:l?4:2,width:l?12:6,height:3},context:"personal"},{id:"career-progress",title:"Career Progress",component:g.Mm,description:"Career growth tracking",position:{x:l?0:6,y:l?7:2,width:6,height:3},context:"personal"}],business:[{id:"welcome",title:"Welcome",component:g.rV,description:"Daily greeting and motivation",position:{x:0,y:0,width:l?12:6,height:2},context:"business"},{id:"project-timeline",title:"Project Timeline",component:g.aP,description:"Upcoming milestones and deadlines",position:{x:l?0:6,y:l?2:0,width:6,height:3},context:"business"},{id:"career-progress",title:"Career Progress",component:g.Mm,description:"Career growth tracking",position:{x:0,y:l?5:3,width:l?12:6,height:3},context:"business"},{id:"ecosystem-health",title:"Ecosystem Health",component:g.s$,description:"System and team overview",position:{x:l?0:6,y:l?8:3,width:6,height:2},context:"business"}],family:[{id:"welcome",title:"Welcome",component:g.rV,description:"Family greeting",position:{x:0,y:0,width:l?12:8,height:2},context:"family"},{id:"ecosystem-health",title:"Family Overview",component:g.s$,description:"Family members and activities",position:{x:l?0:8,y:l?2:0,width:4,height:2},context:"family"},{id:"gamification",title:"Family Achievements",component:g.UI,description:"Family milestones and bonding",position:{x:0,y:l?4:2,width:l?12:6,height:3},context:"family"}],admin:[{id:"welcome",title:"Welcome",component:g.rV,description:"Admin dashboard",position:{x:0,y:0,width:l?12:6,height:2},context:"admin"},{id:"ecosystem-health",title:"System Health",component:g.s$,description:"Complete system overview",position:{x:l?0:6,y:l?2:0,width:6,height:2},context:"admin"},{id:"project-timeline",title:"Projects & Timeline",component:g.aP,description:"All project tracking",position:{x:0,y:l?4:2,width:l?12:6,height:3},context:"admin"},{id:"gamification",title:"System Metrics",component:g.UI,description:"Performance metrics",position:{x:l?0:6,y:l?7:2,width:6,height:3},context:"admin"}]})),[l]),f=(0,s.useMemo)((()=>(w[e]||[]).filter((e=>!d.includes(e.id)))),[e,w,d]),v=[{context:"personal",label:"Personal",icon:"\ud83d\udc64"},{context:"business",label:"Professional",icon:"\ud83d\udcbc"},{context:"family",label:"Family",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"},{context:"admin",label:"Admin",icon:"\u2699\ufe0f"}];return(0,n.jsxs)("div",{className:"unified-dashboard min-h-screen transition-colors duration-300 ".concat(r?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),children:[(0,n.jsx)("header",{className:"sticky top-0 z-40 border-b transition-colors ".concat(r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:(0,n.jsxs)("div",{className:"px-4 py-3 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("button",{onClick:a,className:"md:hidden p-2 rounded-lg transition-colors ".concat(r?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-600"),"aria-label":"Toggle sidebar",children:i?(0,n.jsx)(u.Z,{className:"h-6 w-6"}):(0,n.jsx)(y.Z,{className:"h-6 w-6"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center text-white font-bold",children:"S"}),(0,n.jsxs)("div",{className:"hidden sm:block",children:[(0,n.jsx)("div",{className:"text-lg font-semibold",children:"Salatiso Ecosystem"}),(0,n.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your personalised view through the Mlandeli Notemba Intranet"})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o&&(0,n.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"\ud83d\udc76 Kids Mode"}),"admin"===e&&(0,n.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:[(0,n.jsx)(b.Z,{className:"h-3 w-3"}),(0,n.jsx)("span",{children:"Admin"})]})]})]}),(0,n.jsx)("div",{className:"mt-4 overflow-x-auto pb-2 ".concat(l?"flex space-x-2":"hidden"),children:(0,n.jsx)("div",{className:"flex space-x-2 min-w-max md:min-w-0",children:v.map((i=>{let{context:s,label:a,icon:o}=i;return(0,n.jsxs)("button",{onClick:()=>t(s),className:"px-3 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ".concat(e===s?r?"bg-primary-600 text-white":"bg-primary-500 text-white":r?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,n.jsx)("span",{className:"mr-1",children:o}),a]},s)}))})}),(0,n.jsx)("div",{className:"hidden md:flex mt-4 space-x-2",children:v.map((i=>{let{context:s,label:a,icon:o}=i;return(0,n.jsxs)("button",{onClick:()=>t(s),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(e===s?r?"bg-primary-600 text-white":"bg-primary-500 text-white":r?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,n.jsx)("span",{className:"mr-2",children:o}),a]},s)}))})]})}),(0,n.jsx)("main",{className:"px-4 py-6 sm:px-6 lg:px-8",children:c?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-gray-300 border-t-primary-500 rounded-full"}),(0,n.jsx)("p",{className:"mt-4 ".concat(r?"text-gray-300":"text-gray-600"),children:"Loading dashboard..."})]})}):0===f.length?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("p",{className:"text-lg font-medium ".concat(r?"text-gray-300":"text-gray-600"),children:"No widgets to display"}),(0,n.jsx)("p",{className:"text-sm mt-2 ".concat(r?"text-gray-400":"text-gray-500"),children:"Enable widgets in your dashboard preferences"})]}):(0,n.jsx)("div",{className:"dashboard-grid",style:{display:"grid",gridTemplateColumns:l?"1fr":h?"repeat(8, 1fr)":"repeat(12, 1fr)",gap:l?"1rem":"1.5rem",gridAutoRows:"auto"},children:f.map((e=>{const t=e.component,i=e.position;return(0,n.jsx)("div",{style:(s={colStart:i.x,colSpan:l?12:h?i.width*(8/12):i.width,rowStart:i.y,rowSpan:i.height},l?{gridColumn:"1 / -1",gridRow:"auto"}:{gridColumn:"".concat(s.colStart+1," / span ").concat(s.colSpan),gridRow:"".concat(s.rowStart+1," / span ").concat(s.rowSpan)}),className:"\n                    rounded-xl transition-all duration-300\n                    ".concat(r?"dark":"","\n                  "),children:(0,n.jsx)(t,{})},e.id);var s}))})}),(0,n.jsx)("footer",{className:"border-t mt-12 transition-colors ".concat(r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:(0,n.jsx)("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:(0,n.jsx)("p",{className:"text-center text-sm ".concat(r?"text-gray-400":"text-gray-500"),children:"\xa9 2025 Salatiso Ecosystem. All rights reserved."})})})]})};const f=e=>{let{children:t}=e;const{sidebarCollapsed:i,toggleSidebar:s,darkMode:a}=p();return(0,n.jsx)("div",{className:"dashboard-layout ".concat(a?"dark-mode":"light-mode"),"data-testid":"dashboard-layout",children:(0,n.jsxs)("div",{className:"dashboard-container",children:[!i&&(0,n.jsx)("div",{className:"sidebar-backdrop",onClick:s,role:"button",tabIndex:-1,"aria-hidden":"true","data-testid":"sidebar-backdrop"}),(0,n.jsx)("main",{className:"dashboard-main",children:t})]})})};const v=()=>{const{user:e,loading:t}=(0,d.a)(),i=(0,o.useRouter)();return t||e?t?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-gray-300 border-t-primary-500 rounded-full"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Dashboard - Salatiso Ecosystem"}),(0,n.jsx)("meta",{name:"description",content:"Your unified dashboard with personal, professional, and family contexts"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("meta",{name:"theme-color",content:"#3b82f6"})]}),(0,n.jsx)(f,{children:(0,n.jsx)(w,{})})]}):(i.replace("/"),null)};function k(){return(0,n.jsx)(d.H,{children:(0,n.jsx)(x,{children:(0,n.jsx)(v,{})})})}}},function(e){e.O(0,[6721,2888,9774,179],(function(){return t=40528,e(e.s=t);var t}));var t=e.O();_N_E=t}]);